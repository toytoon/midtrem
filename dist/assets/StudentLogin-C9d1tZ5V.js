const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/client-B9lTMVOu.js","assets/supabase-BlUD6oWY.js","assets/react-C0SUYmK-.js"])))=>i.map(i=>d[i]);
import{j as e}from"./query-K9nIb-JY.js";import{u as h,_ as v}from"./index-BUpAmCwu.js";import{r as i,u as b}from"./react-C0SUYmK-.js";import{C as y,B as j}from"./button-CJ1g5yGr.js";import{I as c}from"./input-BFG2cQQY.js";const w=()=>{const[o,u]=i.useState(""),[n,m]=i.useState(""),[l,d]=i.useState(!1),g=b(),{toast:a}=h(),p=async r=>{if(r.preventDefault(),!o.trim()||!n.trim()){a({title:"خطأ",description:"الرجاء إدخال الكود الاكاديمي والرقم القومي",variant:"destructive"});return}d(!0);try{const{supabase:t}=await v(async()=>{const{supabase:f}=await import("./client-B9lTMVOu.js");return{supabase:f}},__vite__mapDeps([0,1,2])),{data:s,error:x}=await t.from("students").select("*").eq("student_code",o.trim()).eq("national_id",n.trim()).single();if(x||!s){a({title:"خطأ",description:"الكود الاكاديمي أو الرقم القومي غير صحيح",variant:"destructive"}),d(!1);return}sessionStorage.setItem("studentId",s.id),sessionStorage.setItem("studentName",s.student_name),sessionStorage.setItem("studentCode",s.student_code),a({title:"  نتائجك الدراسية",description:`مرحباً ${s.student_name}`}),g("/grades")}catch{a({title:"خطأ",description:"حدث خطأ أثناء تسجيل الدخول",variant:"destructive"})}finally{d(!1)}};return e.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-8",style:{background:"var(--gradient-primary)"},children:e.jsx(y,{className:"w-full max-w-md bg-card/95 backdrop-blur-sm border-border shadow-[var(--shadow-glow)] p-8",children:e.jsxs("div",{className:"flex flex-col items-center gap-6",children:[e.jsx("img",{src:"/logo.png",alt:"Institute Logo",width:144,height:144,fetchPriority:"high",loading:"eager",className:"w-36 h-36 object-contain rounded-full shadow-[var(--shadow-glow)]"}),e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-foreground mb-2",children:"نتيجة درجات - الميد ترم"}),e.jsx("p",{className:"text-muted-foreground",children:"الرجاء إدخال الكود الاكاديمي والرقم القومي"})]}),e.jsxs("form",{onSubmit:p,className:"w-full space-y-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx(c,{type:"text",inputMode:"numeric",pattern:"[0-9]*",maxLength:6,placeholder:"الكود الاكاديمي",value:o,onChange:r=>{const t=r.target.value;/^\d*$/.test(t)&&t.length<=6&&u(t)},className:"text-center bg-secondary/50 border-border text-foreground placeholder:text-muted-foreground font-bold",dir:"ltr"}),e.jsx(c,{type:"text",inputMode:"numeric",pattern:"[0-9]*",maxLength:14,placeholder:"الرقم القومي",value:n,onChange:r=>{const t=r.target.value;/^\d*$/.test(t)&&t.length<=14&&m(t)},className:"text-center bg-secondary/50 border-border text-foreground placeholder:text-muted-foreground font-bold",dir:"ltr"})]}),e.jsx(j,{type:"submit",className:"w-full bg-primary hover:bg-primary/90 text-primary-foreground",disabled:l,children:l?"جاري التحميل...":"الاستعلام عن النتيجة"})]})]})})})},C=()=>e.jsx(w,{});export{C as default};
