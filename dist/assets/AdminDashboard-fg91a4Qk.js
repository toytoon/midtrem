import{j as t,u as it,b as Ee,k as jr}from"./query-K9nIb-JY.js";import{r as o,R as Fs,a as Sr,u as Ls,e as $s}from"./react-C0SUYmK-.js";import{b as Cr,C as De,B as $,c as Vs}from"./button-CJ1g5yGr.js";import{c as ie,a as ue,b as qe,d as _r,P as B,e as P,f as z,g as Ke,h as tt,i as ct,j as V,k as Er,l as Ir,m as Bs,D as Rr,X as Tr,u as lt,n as Dr,R as Ws,V as Ks,A as Hs,C as Us,o as qs,p as Gs}from"./index-BUpAmCwu.js";import{I as he}from"./input-BFG2cQQY.js";import{S as Ie,T as Vt,a as Bt,b as ge,c as de,d as Wt,e as se,L as zs}from"./skeleton-CbSoJ9EV.js";import{_ as pe,a as Ar,b as Qs}from"./supabase-BlUD6oWY.js";import{supabase as L}from"./client-B9lTMVOu.js";import{logAdminAction as oe}from"./auth-KP9ixS3Z.js";import{g as re,s as Ze,v as Ys,c as lr,d as Xs}from"./auth-utils-B0pbsvyB.js";import{r as dr,u as ur}from"./xlsx-FEiRtxso.js";import{G as Zs}from"./graduation-cap-D9QKa9IG.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Js=ie("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eo=ie("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pr=ie("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kt=ie("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ht=ie("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const to=ie("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ut=ie("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qt=ie("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gt=ie("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ro=ie("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const no=ie("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);var so=Fs[" useId ".trim().toString()]||(()=>{}),oo=0;function ve(e){const[r,n]=o.useState(so());return ue(()=>{n(s=>s??String(oo++))},[e]),e||(r?`radix-${r}`:"")}var ao=o.createContext(void 0);function zt(e){const r=o.useContext(ao);return e||r||"ltr"}var wt="rovingFocusGroup.onEntryFocus",io={bubbles:!1,cancelable:!0},Ge="RovingFocusGroup",[Tt,kr,co]=_r(Ge),[lo,Mr]=qe(Ge,[co]),[uo,fo]=lo(Ge),Or=o.forwardRef((e,r)=>t.jsx(Tt.Provider,{scope:e.__scopeRovingFocusGroup,children:t.jsx(Tt.Slot,{scope:e.__scopeRovingFocusGroup,children:t.jsx(mo,{...e,ref:r})})}));Or.displayName=Ge;var mo=o.forwardRef((e,r)=>{const{__scopeRovingFocusGroup:n,orientation:s,loop:a=!1,dir:l,currentTabStopId:i,defaultCurrentTabStopId:c,onCurrentTabStopIdChange:u,onEntryFocus:m,preventScrollOnEntryFocus:v=!1,...f}=e,b=o.useRef(null),C=z(r,b),w=zt(l),[d,h]=Ke({prop:i,defaultProp:c??null,onChange:u,caller:Ge}),[x,N]=o.useState(!1),j=tt(m),I=kr(n),y=o.useRef(!1),[E,g]=o.useState(0);return o.useEffect(()=>{const p=b.current;if(p)return p.addEventListener(wt,j),()=>p.removeEventListener(wt,j)},[j]),t.jsx(uo,{scope:n,orientation:s,dir:w,loop:a,currentTabStopId:d,onItemFocus:o.useCallback(p=>h(p),[h]),onItemShiftTab:o.useCallback(()=>N(!0),[]),onFocusableItemAdd:o.useCallback(()=>g(p=>p+1),[]),onFocusableItemRemove:o.useCallback(()=>g(p=>p-1),[]),children:t.jsx(B.div,{tabIndex:x||E===0?-1:0,"data-orientation":s,...f,ref:C,style:{outline:"none",...e.style},onMouseDown:P(e.onMouseDown,()=>{y.current=!0}),onFocus:P(e.onFocus,p=>{const S=!y.current;if(p.target===p.currentTarget&&S&&!x){const D=new CustomEvent(wt,io);if(p.currentTarget.dispatchEvent(D),!D.defaultPrevented){const k=I().filter(A=>A.focusable),U=k.find(A=>A.active),Z=k.find(A=>A.id===d),q=[U,Z,...k].filter(Boolean).map(A=>A.ref.current);$r(q,v)}}y.current=!1}),onBlur:P(e.onBlur,()=>N(!1))})})}),Fr="RovingFocusGroupItem",Lr=o.forwardRef((e,r)=>{const{__scopeRovingFocusGroup:n,focusable:s=!0,active:a=!1,tabStopId:l,children:i,...c}=e,u=ve(),m=l||u,v=fo(Fr,n),f=v.currentTabStopId===m,b=kr(n),{onFocusableItemAdd:C,onFocusableItemRemove:w,currentTabStopId:d}=v;return o.useEffect(()=>{if(s)return C(),()=>w()},[s,C,w]),t.jsx(Tt.ItemSlot,{scope:n,id:m,focusable:s,active:a,children:t.jsx(B.span,{tabIndex:f?0:-1,"data-orientation":v.orientation,...c,ref:r,onMouseDown:P(e.onMouseDown,h=>{s?v.onItemFocus(m):h.preventDefault()}),onFocus:P(e.onFocus,()=>v.onItemFocus(m)),onKeyDown:P(e.onKeyDown,h=>{if(h.key==="Tab"&&h.shiftKey){v.onItemShiftTab();return}if(h.target!==h.currentTarget)return;const x=go(h,v.orientation,v.dir);if(x!==void 0){if(h.metaKey||h.ctrlKey||h.altKey||h.shiftKey)return;h.preventDefault();let j=b().filter(I=>I.focusable).map(I=>I.ref.current);if(x==="last")j.reverse();else if(x==="prev"||x==="next"){x==="prev"&&j.reverse();const I=j.indexOf(h.currentTarget);j=v.loop?vo(j,I+1):j.slice(I+1)}setTimeout(()=>$r(j))}}),children:typeof i=="function"?i({isCurrentTabStop:f,hasTabStop:d!=null}):i})})});Lr.displayName=Fr;var po={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function ho(e,r){return r!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function go(e,r,n){const s=ho(e.key,n);if(!(r==="vertical"&&["ArrowLeft","ArrowRight"].includes(s))&&!(r==="horizontal"&&["ArrowUp","ArrowDown"].includes(s)))return po[s]}function $r(e,r=!1){const n=document.activeElement;for(const s of e)if(s===n||(s.focus({preventScroll:r}),document.activeElement!==n))return}function vo(e,r){return e.map((n,s)=>e[(r+s)%e.length])}var xo=Or,bo=Lr,dt="Tabs",[yo]=qe(dt,[Mr]),Vr=Mr(),[No,Qt]=yo(dt),Br=o.forwardRef((e,r)=>{const{__scopeTabs:n,value:s,onValueChange:a,defaultValue:l,orientation:i="horizontal",dir:c,activationMode:u="automatic",...m}=e,v=zt(c),[f,b]=Ke({prop:s,onChange:a,defaultProp:l??"",caller:dt});return t.jsx(No,{scope:n,baseId:ve(),value:f,onValueChange:b,orientation:i,dir:v,activationMode:u,children:t.jsx(B.div,{dir:v,"data-orientation":i,...m,ref:r})})});Br.displayName=dt;var Wr="TabsList",Kr=o.forwardRef((e,r)=>{const{__scopeTabs:n,loop:s=!0,...a}=e,l=Qt(Wr,n),i=Vr(n);return t.jsx(xo,{asChild:!0,...i,orientation:l.orientation,dir:l.dir,loop:s,children:t.jsx(B.div,{role:"tablist","aria-orientation":l.orientation,...a,ref:r})})});Kr.displayName=Wr;var Hr="TabsTrigger",Ur=o.forwardRef((e,r)=>{const{__scopeTabs:n,value:s,disabled:a=!1,...l}=e,i=Qt(Hr,n),c=Vr(n),u=zr(i.baseId,s),m=Qr(i.baseId,s),v=s===i.value;return t.jsx(bo,{asChild:!0,...c,focusable:!a,active:v,children:t.jsx(B.button,{type:"button",role:"tab","aria-selected":v,"aria-controls":m,"data-state":v?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:u,...l,ref:r,onMouseDown:P(e.onMouseDown,f=>{!a&&f.button===0&&f.ctrlKey===!1?i.onValueChange(s):f.preventDefault()}),onKeyDown:P(e.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&i.onValueChange(s)}),onFocus:P(e.onFocus,()=>{const f=i.activationMode!=="manual";!v&&!a&&f&&i.onValueChange(s)})})})});Ur.displayName=Hr;var qr="TabsContent",Gr=o.forwardRef((e,r)=>{const{__scopeTabs:n,value:s,forceMount:a,children:l,...i}=e,c=Qt(qr,n),u=zr(c.baseId,s),m=Qr(c.baseId,s),v=s===c.value,f=o.useRef(v);return o.useEffect(()=>{const b=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(b)},[]),t.jsx(ct,{present:a||v,children:({present:b})=>t.jsx(B.div,{"data-state":v?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":u,hidden:!b,id:m,tabIndex:0,...i,ref:r,style:{...e.style,animationDuration:f.current?"0s":void 0},children:b&&l})})});Gr.displayName=qr;function zr(e,r){return`${e}-trigger-${r}`}function Qr(e,r){return`${e}-content-${r}`}var wo=Br,Yr=Kr,Xr=Ur,Zr=Gr;const jo=wo,Jr=o.forwardRef(({className:e,...r},n)=>t.jsx(Yr,{ref:n,className:V("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...r}));Jr.displayName=Yr.displayName;const Ve=o.forwardRef(({className:e,...r},n)=>t.jsx(Xr,{ref:n,className:V("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",e),...r}));Ve.displayName=Xr.displayName;const Be=o.forwardRef(({className:e,...r},n)=>t.jsx(Zr,{ref:n,className:V("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...r}));Be.displayName=Zr.displayName;var jt="focusScope.autoFocusOnMount",St="focusScope.autoFocusOnUnmount",fr={bubbles:!1,cancelable:!0},So="FocusScope",Yt=o.forwardRef((e,r)=>{const{loop:n=!1,trapped:s=!1,onMountAutoFocus:a,onUnmountAutoFocus:l,...i}=e,[c,u]=o.useState(null),m=tt(a),v=tt(l),f=o.useRef(null),b=z(r,d=>u(d)),C=o.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;o.useEffect(()=>{if(s){let d=function(j){if(C.paused||!c)return;const I=j.target;c.contains(I)?f.current=I:me(f.current,{select:!0})},h=function(j){if(C.paused||!c)return;const I=j.relatedTarget;I!==null&&(c.contains(I)||me(f.current,{select:!0}))},x=function(j){if(document.activeElement===document.body)for(const y of j)y.removedNodes.length>0&&me(c)};document.addEventListener("focusin",d),document.addEventListener("focusout",h);const N=new MutationObserver(x);return c&&N.observe(c,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",d),document.removeEventListener("focusout",h),N.disconnect()}}},[s,c,C.paused]),o.useEffect(()=>{if(c){pr.add(C);const d=document.activeElement;if(!c.contains(d)){const x=new CustomEvent(jt,fr);c.addEventListener(jt,m),c.dispatchEvent(x),x.defaultPrevented||(Co(To(en(c)),{select:!0}),document.activeElement===d&&me(c))}return()=>{c.removeEventListener(jt,m),setTimeout(()=>{const x=new CustomEvent(St,fr);c.addEventListener(St,v),c.dispatchEvent(x),x.defaultPrevented||me(d??document.body,{select:!0}),c.removeEventListener(St,v),pr.remove(C)},0)}}},[c,m,v,C]);const w=o.useCallback(d=>{if(!n&&!s||C.paused)return;const h=d.key==="Tab"&&!d.altKey&&!d.ctrlKey&&!d.metaKey,x=document.activeElement;if(h&&x){const N=d.currentTarget,[j,I]=_o(N);j&&I?!d.shiftKey&&x===I?(d.preventDefault(),n&&me(j,{select:!0})):d.shiftKey&&x===j&&(d.preventDefault(),n&&me(I,{select:!0})):x===N&&d.preventDefault()}},[n,s,C.paused]);return t.jsx(B.div,{tabIndex:-1,...i,ref:b,onKeyDown:w})});Yt.displayName=So;function Co(e,{select:r=!1}={}){const n=document.activeElement;for(const s of e)if(me(s,{select:r}),document.activeElement!==n)return}function _o(e){const r=en(e),n=mr(r,e),s=mr(r.reverse(),e);return[n,s]}function en(e){const r=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const a=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||a?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)r.push(n.currentNode);return r}function mr(e,r){for(const n of e)if(!Eo(n,{upTo:r}))return n}function Eo(e,{upTo:r}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(r!==void 0&&e===r)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function Io(e){return e instanceof HTMLInputElement&&"select"in e}function me(e,{select:r=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&Io(e)&&r&&e.select()}}var pr=Ro();function Ro(){let e=[];return{add(r){const n=e[0];r!==n&&n?.pause(),e=hr(e,r),e.unshift(r)},remove(r){e=hr(e,r),e[0]?.resume()}}}function hr(e,r){const n=[...e],s=n.indexOf(r);return s!==-1&&n.splice(s,1),n}function To(e){return e.filter(r=>r.tagName!=="A")}var Ct=0;function tn(){o.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??gr()),document.body.insertAdjacentElement("beforeend",e[1]??gr()),Ct++,()=>{Ct===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(r=>r.remove()),Ct--}},[])}function gr(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Je="right-scroll-bar-position",et="width-before-scroll-bar",Do="with-scroll-bars-hidden",Ao="--removed-body-scroll-bar-size";function _t(e,r){return typeof e=="function"?e(r):e&&(e.current=r),e}function Po(e,r){var n=o.useState(function(){return{value:e,callback:r,facade:{get current(){return n.value},set current(s){var a=n.value;a!==s&&(n.value=s,n.callback(s,a))}}}})[0];return n.callback=r,n.facade}var ko=typeof window<"u"?o.useLayoutEffect:o.useEffect,vr=new WeakMap;function Mo(e,r){var n=Po(null,function(s){return e.forEach(function(a){return _t(a,s)})});return ko(function(){var s=vr.get(n);if(s){var a=new Set(s),l=new Set(e),i=n.current;a.forEach(function(c){l.has(c)||_t(c,null)}),l.forEach(function(c){a.has(c)||_t(c,i)})}vr.set(n,e)},[e]),n}function Oo(e){return e}function Fo(e,r){r===void 0&&(r=Oo);var n=[],s=!1,a={read:function(){if(s)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(l){var i=r(l,s);return n.push(i),function(){n=n.filter(function(c){return c!==i})}},assignSyncMedium:function(l){for(s=!0;n.length;){var i=n;n=[],i.forEach(l)}n={push:function(c){return l(c)},filter:function(){return n}}},assignMedium:function(l){s=!0;var i=[];if(n.length){var c=n;n=[],c.forEach(l),i=n}var u=function(){var v=i;i=[],v.forEach(l)},m=function(){return Promise.resolve().then(u)};m(),n={push:function(v){i.push(v),m()},filter:function(v){return i=i.filter(v),n}}}};return a}function Lo(e){e===void 0&&(e={});var r=Fo(null);return r.options=pe({async:!0,ssr:!1},e),r}var rn=function(e){var r=e.sideCar,n=Ar(e,["sideCar"]);if(!r)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var s=r.read();if(!s)throw new Error("Sidecar medium not found");return o.createElement(s,pe({},n))};rn.isSideCarExport=!0;function $o(e,r){return e.useMedium(r),rn}var nn=Lo(),Et=function(){},ut=o.forwardRef(function(e,r){var n=o.useRef(null),s=o.useState({onScrollCapture:Et,onWheelCapture:Et,onTouchMoveCapture:Et}),a=s[0],l=s[1],i=e.forwardProps,c=e.children,u=e.className,m=e.removeScrollBar,v=e.enabled,f=e.shards,b=e.sideCar,C=e.noRelative,w=e.noIsolation,d=e.inert,h=e.allowPinchZoom,x=e.as,N=x===void 0?"div":x,j=e.gapMode,I=Ar(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),y=b,E=Mo([n,r]),g=pe(pe({},I),a);return o.createElement(o.Fragment,null,v&&o.createElement(y,{sideCar:nn,removeScrollBar:m,shards:f,noRelative:C,noIsolation:w,inert:d,setCallbacks:l,allowPinchZoom:!!h,lockRef:n,gapMode:j}),i?o.cloneElement(o.Children.only(c),pe(pe({},g),{ref:E})):o.createElement(N,pe({},g,{className:u,ref:E}),c))});ut.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};ut.classNames={fullWidth:et,zeroRight:Je};var Vo=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Bo(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var r=Vo();return r&&e.setAttribute("nonce",r),e}function Wo(e,r){e.styleSheet?e.styleSheet.cssText=r:e.appendChild(document.createTextNode(r))}function Ko(e){var r=document.head||document.getElementsByTagName("head")[0];r.appendChild(e)}var Ho=function(){var e=0,r=null;return{add:function(n){e==0&&(r=Bo())&&(Wo(r,n),Ko(r)),e++},remove:function(){e--,!e&&r&&(r.parentNode&&r.parentNode.removeChild(r),r=null)}}},Uo=function(){var e=Ho();return function(r,n){o.useEffect(function(){return e.add(r),function(){e.remove()}},[r&&n])}},sn=function(){var e=Uo(),r=function(n){var s=n.styles,a=n.dynamic;return e(s,a),null};return r},qo={left:0,top:0,right:0,gap:0},It=function(e){return parseInt(e||"",10)||0},Go=function(e){var r=window.getComputedStyle(document.body),n=r[e==="padding"?"paddingLeft":"marginLeft"],s=r[e==="padding"?"paddingTop":"marginTop"],a=r[e==="padding"?"paddingRight":"marginRight"];return[It(n),It(s),It(a)]},zo=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return qo;var r=Go(e),n=document.documentElement.clientWidth,s=window.innerWidth;return{left:r[0],top:r[1],right:r[2],gap:Math.max(0,s-n+r[2]-r[0])}},Qo=sn(),Re="data-scroll-locked",Yo=function(e,r,n,s){var a=e.left,l=e.top,i=e.right,c=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(Do,` {
   overflow: hidden `).concat(s,`;
   padding-right: `).concat(c,"px ").concat(s,`;
  }
  body[`).concat(Re,`] {
    overflow: hidden `).concat(s,`;
    overscroll-behavior: contain;
    `).concat([r&&"position: relative ".concat(s,";"),n==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(l,`px;
    padding-right: `).concat(i,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(c,"px ").concat(s,`;
    `),n==="padding"&&"padding-right: ".concat(c,"px ").concat(s,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Je,` {
    right: `).concat(c,"px ").concat(s,`;
  }
  
  .`).concat(et,` {
    margin-right: `).concat(c,"px ").concat(s,`;
  }
  
  .`).concat(Je," .").concat(Je,` {
    right: 0 `).concat(s,`;
  }
  
  .`).concat(et," .").concat(et,` {
    margin-right: 0 `).concat(s,`;
  }
  
  body[`).concat(Re,`] {
    `).concat(Ao,": ").concat(c,`px;
  }
`)},xr=function(){var e=parseInt(document.body.getAttribute(Re)||"0",10);return isFinite(e)?e:0},Xo=function(){o.useEffect(function(){return document.body.setAttribute(Re,(xr()+1).toString()),function(){var e=xr()-1;e<=0?document.body.removeAttribute(Re):document.body.setAttribute(Re,e.toString())}},[])},Zo=function(e){var r=e.noRelative,n=e.noImportant,s=e.gapMode,a=s===void 0?"margin":s;Xo();var l=o.useMemo(function(){return zo(a)},[a]);return o.createElement(Qo,{styles:Yo(l,!r,a,n?"":"!important")})},Dt=!1;if(typeof window<"u")try{var ze=Object.defineProperty({},"passive",{get:function(){return Dt=!0,!0}});window.addEventListener("test",ze,ze),window.removeEventListener("test",ze,ze)}catch{Dt=!1}var Se=Dt?{passive:!1}:!1,Jo=function(e){return e.tagName==="TEXTAREA"},on=function(e,r){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[r]!=="hidden"&&!(n.overflowY===n.overflowX&&!Jo(e)&&n[r]==="visible")},ea=function(e){return on(e,"overflowY")},ta=function(e){return on(e,"overflowX")},br=function(e,r){var n=r.ownerDocument,s=r;do{typeof ShadowRoot<"u"&&s instanceof ShadowRoot&&(s=s.host);var a=an(e,s);if(a){var l=cn(e,s),i=l[1],c=l[2];if(i>c)return!0}s=s.parentNode}while(s&&s!==n.body);return!1},ra=function(e){var r=e.scrollTop,n=e.scrollHeight,s=e.clientHeight;return[r,n,s]},na=function(e){var r=e.scrollLeft,n=e.scrollWidth,s=e.clientWidth;return[r,n,s]},an=function(e,r){return e==="v"?ea(r):ta(r)},cn=function(e,r){return e==="v"?ra(r):na(r)},sa=function(e,r){return e==="h"&&r==="rtl"?-1:1},oa=function(e,r,n,s,a){var l=sa(e,window.getComputedStyle(r).direction),i=l*s,c=n.target,u=r.contains(c),m=!1,v=i>0,f=0,b=0;do{if(!c)break;var C=cn(e,c),w=C[0],d=C[1],h=C[2],x=d-h-l*w;(w||x)&&an(e,c)&&(f+=x,b+=w);var N=c.parentNode;c=N&&N.nodeType===Node.DOCUMENT_FRAGMENT_NODE?N.host:N}while(!u&&c!==document.body||u&&(r.contains(c)||r===c));return(v&&Math.abs(f)<1||!v&&Math.abs(b)<1)&&(m=!0),m},Qe=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},yr=function(e){return[e.deltaX,e.deltaY]},Nr=function(e){return e&&"current"in e?e.current:e},aa=function(e,r){return e[0]===r[0]&&e[1]===r[1]},ia=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},ca=0,Ce=[];function la(e){var r=o.useRef([]),n=o.useRef([0,0]),s=o.useRef(),a=o.useState(ca++)[0],l=o.useState(sn)[0],i=o.useRef(e);o.useEffect(function(){i.current=e},[e]),o.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var d=Qs([e.lockRef.current],(e.shards||[]).map(Nr),!0).filter(Boolean);return d.forEach(function(h){return h.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),d.forEach(function(h){return h.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var c=o.useCallback(function(d,h){if("touches"in d&&d.touches.length===2||d.type==="wheel"&&d.ctrlKey)return!i.current.allowPinchZoom;var x=Qe(d),N=n.current,j="deltaX"in d?d.deltaX:N[0]-x[0],I="deltaY"in d?d.deltaY:N[1]-x[1],y,E=d.target,g=Math.abs(j)>Math.abs(I)?"h":"v";if("touches"in d&&g==="h"&&E.type==="range")return!1;var p=br(g,E);if(!p)return!0;if(p?y=g:(y=g==="v"?"h":"v",p=br(g,E)),!p)return!1;if(!s.current&&"changedTouches"in d&&(j||I)&&(s.current=y),!y)return!0;var S=s.current||y;return oa(S,h,d,S==="h"?j:I)},[]),u=o.useCallback(function(d){var h=d;if(!(!Ce.length||Ce[Ce.length-1]!==l)){var x="deltaY"in h?yr(h):Qe(h),N=r.current.filter(function(y){return y.name===h.type&&(y.target===h.target||h.target===y.shadowParent)&&aa(y.delta,x)})[0];if(N&&N.should){h.cancelable&&h.preventDefault();return}if(!N){var j=(i.current.shards||[]).map(Nr).filter(Boolean).filter(function(y){return y.contains(h.target)}),I=j.length>0?c(h,j[0]):!i.current.noIsolation;I&&h.cancelable&&h.preventDefault()}}},[]),m=o.useCallback(function(d,h,x,N){var j={name:d,delta:h,target:x,should:N,shadowParent:da(x)};r.current.push(j),setTimeout(function(){r.current=r.current.filter(function(I){return I!==j})},1)},[]),v=o.useCallback(function(d){n.current=Qe(d),s.current=void 0},[]),f=o.useCallback(function(d){m(d.type,yr(d),d.target,c(d,e.lockRef.current))},[]),b=o.useCallback(function(d){m(d.type,Qe(d),d.target,c(d,e.lockRef.current))},[]);o.useEffect(function(){return Ce.push(l),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:b}),document.addEventListener("wheel",u,Se),document.addEventListener("touchmove",u,Se),document.addEventListener("touchstart",v,Se),function(){Ce=Ce.filter(function(d){return d!==l}),document.removeEventListener("wheel",u,Se),document.removeEventListener("touchmove",u,Se),document.removeEventListener("touchstart",v,Se)}},[]);var C=e.removeScrollBar,w=e.inert;return o.createElement(o.Fragment,null,w?o.createElement(l,{styles:ia(a)}):null,C?o.createElement(Zo,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function da(e){for(var r=null;e!==null;)e instanceof ShadowRoot&&(r=e.host,e=e.host),e=e.parentNode;return r}const ua=$o(nn,la);var Xt=o.forwardRef(function(e,r){return o.createElement(ut,pe({},e,{ref:r,sideCar:ua}))});Xt.classNames=ut.classNames;var fa=function(e){if(typeof document>"u")return null;var r=Array.isArray(e)?e[0]:e;return r.ownerDocument.body},_e=new WeakMap,Ye=new WeakMap,Xe={},Rt=0,ln=function(e){return e&&(e.host||ln(e.parentNode))},ma=function(e,r){return r.map(function(n){if(e.contains(n))return n;var s=ln(n);return s&&e.contains(s)?s:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},pa=function(e,r,n,s){var a=ma(r,Array.isArray(e)?e:[e]);Xe[n]||(Xe[n]=new WeakMap);var l=Xe[n],i=[],c=new Set,u=new Set(a),m=function(f){!f||c.has(f)||(c.add(f),m(f.parentNode))};a.forEach(m);var v=function(f){!f||u.has(f)||Array.prototype.forEach.call(f.children,function(b){if(c.has(b))v(b);else try{var C=b.getAttribute(s),w=C!==null&&C!=="false",d=(_e.get(b)||0)+1,h=(l.get(b)||0)+1;_e.set(b,d),l.set(b,h),i.push(b),d===1&&w&&Ye.set(b,!0),h===1&&b.setAttribute(n,"true"),w||b.setAttribute(s,"true")}catch(x){console.error("aria-hidden: cannot operate on ",b,x)}})};return v(r),c.clear(),Rt++,function(){i.forEach(function(f){var b=_e.get(f)-1,C=l.get(f)-1;_e.set(f,b),l.set(f,C),b||(Ye.has(f)||f.removeAttribute(s),Ye.delete(f)),C||f.removeAttribute(n)}),Rt--,Rt||(_e=new WeakMap,_e=new WeakMap,Ye=new WeakMap,Xe={})}},dn=function(e,r,n){n===void 0&&(n="data-aria-hidden");var s=Array.from(Array.isArray(e)?e:[e]),a=fa(e);return a?(s.push.apply(s,Array.from(a.querySelectorAll("[aria-live], script"))),pa(s,a,n,"aria-hidden")):function(){return null}};function ha(e){const r=ga(e),n=o.forwardRef((s,a)=>{const{children:l,...i}=s,c=o.Children.toArray(l),u=c.find(xa);if(u){const m=u.props.children,v=c.map(f=>f===u?o.Children.count(m)>1?o.Children.only(null):o.isValidElement(m)?m.props.children:null:f);return t.jsx(r,{...i,ref:a,children:o.isValidElement(m)?o.cloneElement(m,void 0,v):null})}return t.jsx(r,{...i,ref:a,children:l})});return n.displayName=`${e}.Slot`,n}function ga(e){const r=o.forwardRef((n,s)=>{const{children:a,...l}=n;if(o.isValidElement(a)){const i=ya(a),c=ba(l,a.props);return a.type!==o.Fragment&&(c.ref=s?Er(s,i):i),o.cloneElement(a,c)}return o.Children.count(a)>1?o.Children.only(null):null});return r.displayName=`${e}.SlotClone`,r}var va=Symbol("radix.slottable");function xa(e){return o.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===va}function ba(e,r){const n={...r};for(const s in r){const a=e[s],l=r[s];/^on[A-Z]/.test(s)?a&&l?n[s]=(...c)=>{const u=l(...c);return a(...c),u}:a&&(n[s]=a):s==="style"?n[s]={...a,...l}:s==="className"&&(n[s]=[a,l].filter(Boolean).join(" "))}return{...e,...n}}function ya(e){let r=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=r&&"isReactWarning"in r&&r.isReactWarning;return n?e.ref:(r=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=r&&"isReactWarning"in r&&r.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var ft="Dialog",[un,fn]=qe(ft),[Na,ce]=un(ft),mn=e=>{const{__scopeDialog:r,children:n,open:s,defaultOpen:a,onOpenChange:l,modal:i=!0}=e,c=o.useRef(null),u=o.useRef(null),[m,v]=Ke({prop:s,defaultProp:a??!1,onChange:l,caller:ft});return t.jsx(Na,{scope:r,triggerRef:c,contentRef:u,contentId:ve(),titleId:ve(),descriptionId:ve(),open:m,onOpenChange:v,onOpenToggle:o.useCallback(()=>v(f=>!f),[v]),modal:i,children:n})};mn.displayName=ft;var pn="DialogTrigger",hn=o.forwardRef((e,r)=>{const{__scopeDialog:n,...s}=e,a=ce(pn,n),l=z(r,a.triggerRef);return t.jsx(B.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":er(a.open),...s,ref:l,onClick:P(e.onClick,a.onOpenToggle)})});hn.displayName=pn;var Zt="DialogPortal",[wa,gn]=un(Zt,{forceMount:void 0}),vn=e=>{const{__scopeDialog:r,forceMount:n,children:s,container:a}=e,l=ce(Zt,r);return t.jsx(wa,{scope:r,forceMount:n,children:o.Children.map(s,i=>t.jsx(ct,{present:n||l.open,children:t.jsx(Ir,{asChild:!0,container:a,children:i})}))})};vn.displayName=Zt;var rt="DialogOverlay",xn=o.forwardRef((e,r)=>{const n=gn(rt,e.__scopeDialog),{forceMount:s=n.forceMount,...a}=e,l=ce(rt,e.__scopeDialog);return l.modal?t.jsx(ct,{present:s||l.open,children:t.jsx(Sa,{...a,ref:r})}):null});xn.displayName=rt;var ja=ha("DialogOverlay.RemoveScroll"),Sa=o.forwardRef((e,r)=>{const{__scopeDialog:n,...s}=e,a=ce(rt,n);return t.jsx(Xt,{as:ja,allowPinchZoom:!0,shards:[a.contentRef],children:t.jsx(B.div,{"data-state":er(a.open),...s,ref:r,style:{pointerEvents:"auto",...s.style}})})}),Ne="DialogContent",bn=o.forwardRef((e,r)=>{const n=gn(Ne,e.__scopeDialog),{forceMount:s=n.forceMount,...a}=e,l=ce(Ne,e.__scopeDialog);return t.jsx(ct,{present:s||l.open,children:l.modal?t.jsx(Ca,{...a,ref:r}):t.jsx(_a,{...a,ref:r})})});bn.displayName=Ne;var Ca=o.forwardRef((e,r)=>{const n=ce(Ne,e.__scopeDialog),s=o.useRef(null),a=z(r,n.contentRef,s);return o.useEffect(()=>{const l=s.current;if(l)return dn(l)},[]),t.jsx(yn,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:P(e.onCloseAutoFocus,l=>{l.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:P(e.onPointerDownOutside,l=>{const i=l.detail.originalEvent,c=i.button===0&&i.ctrlKey===!0;(i.button===2||c)&&l.preventDefault()}),onFocusOutside:P(e.onFocusOutside,l=>l.preventDefault())})}),_a=o.forwardRef((e,r)=>{const n=ce(Ne,e.__scopeDialog),s=o.useRef(!1),a=o.useRef(!1);return t.jsx(yn,{...e,ref:r,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:l=>{e.onCloseAutoFocus?.(l),l.defaultPrevented||(s.current||n.triggerRef.current?.focus(),l.preventDefault()),s.current=!1,a.current=!1},onInteractOutside:l=>{e.onInteractOutside?.(l),l.defaultPrevented||(s.current=!0,l.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const i=l.target;n.triggerRef.current?.contains(i)&&l.preventDefault(),l.detail.originalEvent.type==="focusin"&&a.current&&l.preventDefault()}})}),yn=o.forwardRef((e,r)=>{const{__scopeDialog:n,trapFocus:s,onOpenAutoFocus:a,onCloseAutoFocus:l,...i}=e,c=ce(Ne,n),u=o.useRef(null),m=z(r,u);return tn(),t.jsxs(t.Fragment,{children:[t.jsx(Yt,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:a,onUnmountAutoFocus:l,children:t.jsx(Rr,{role:"dialog",id:c.contentId,"aria-describedby":c.descriptionId,"aria-labelledby":c.titleId,"data-state":er(c.open),...i,ref:m,onDismiss:()=>c.onOpenChange(!1)})}),t.jsxs(t.Fragment,{children:[t.jsx(Ia,{titleId:c.titleId}),t.jsx(Ta,{contentRef:u,descriptionId:c.descriptionId})]})]})}),Jt="DialogTitle",Nn=o.forwardRef((e,r)=>{const{__scopeDialog:n,...s}=e,a=ce(Jt,n);return t.jsx(B.h2,{id:a.titleId,...s,ref:r})});Nn.displayName=Jt;var wn="DialogDescription",jn=o.forwardRef((e,r)=>{const{__scopeDialog:n,...s}=e,a=ce(wn,n);return t.jsx(B.p,{id:a.descriptionId,...s,ref:r})});jn.displayName=wn;var Sn="DialogClose",Cn=o.forwardRef((e,r)=>{const{__scopeDialog:n,...s}=e,a=ce(Sn,n);return t.jsx(B.button,{type:"button",...s,ref:r,onClick:P(e.onClick,()=>a.onOpenChange(!1))})});Cn.displayName=Sn;function er(e){return e?"open":"closed"}var _n="DialogTitleWarning",[Ea,En]=Bs(_n,{contentName:Ne,titleName:Jt,docsSlug:"dialog"}),Ia=({titleId:e})=>{const r=En(_n),n=`\`${r.contentName}\` requires a \`${r.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${r.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${r.docsSlug}`;return o.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},Ra="DialogDescriptionWarning",Ta=({contentRef:e,descriptionId:r})=>{const s=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${En(Ra).contentName}}.`;return o.useEffect(()=>{const a=e.current?.getAttribute("aria-describedby");r&&a&&(document.getElementById(r)||console.warn(s))},[s,e,r]),null},In=mn,Rn=hn,Tn=vn,tr=xn,rr=bn,nr=Nn,sr=jn,or=Cn;const ar=In,ir=Rn,Da=Tn,Dn=o.forwardRef(({className:e,...r},n)=>t.jsx(tr,{ref:n,className:V("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...r}));Dn.displayName=tr.displayName;const mt=o.forwardRef(({className:e,children:r,...n},s)=>t.jsxs(Da,{children:[t.jsx(Dn,{}),t.jsxs(rr,{ref:s,className:V("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...n,children:[r,t.jsxs(or,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[t.jsx(Tr,{className:"h-4 w-4"}),t.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));mt.displayName=rr.displayName;const pt=({className:e,...r})=>t.jsx("div",{className:V("flex flex-col space-y-1.5 text-center sm:text-left",e),...r});pt.displayName="DialogHeader";const ht=o.forwardRef(({className:e,...r},n)=>t.jsx(nr,{ref:n,className:V("text-lg font-semibold leading-none tracking-tight",e),...r}));ht.displayName=nr.displayName;const Aa=o.forwardRef(({className:e,...r},n)=>t.jsx(sr,{ref:n,className:V("text-sm text-muted-foreground",e),...r}));Aa.displayName=sr.displayName;var Pa=Symbol("radix.slottable");function ka(e){const r=({children:n})=>t.jsx(t.Fragment,{children:n});return r.displayName=`${e}.Slottable`,r.__radixId=Pa,r}var An="AlertDialog",[Ma]=qe(An,[fn]),fe=fn(),Pn=e=>{const{__scopeAlertDialog:r,...n}=e,s=fe(r);return t.jsx(In,{...s,...n,modal:!0})};Pn.displayName=An;var Oa="AlertDialogTrigger",kn=o.forwardRef((e,r)=>{const{__scopeAlertDialog:n,...s}=e,a=fe(n);return t.jsx(Rn,{...a,...s,ref:r})});kn.displayName=Oa;var Fa="AlertDialogPortal",Mn=e=>{const{__scopeAlertDialog:r,...n}=e,s=fe(r);return t.jsx(Tn,{...s,...n})};Mn.displayName=Fa;var La="AlertDialogOverlay",On=o.forwardRef((e,r)=>{const{__scopeAlertDialog:n,...s}=e,a=fe(n);return t.jsx(tr,{...a,...s,ref:r})});On.displayName=La;var Te="AlertDialogContent",[$a,Va]=Ma(Te),Ba=ka("AlertDialogContent"),Fn=o.forwardRef((e,r)=>{const{__scopeAlertDialog:n,children:s,...a}=e,l=fe(n),i=o.useRef(null),c=z(r,i),u=o.useRef(null);return t.jsx(Ea,{contentName:Te,titleName:Ln,docsSlug:"alert-dialog",children:t.jsx($a,{scope:n,cancelRef:u,children:t.jsxs(rr,{role:"alertdialog",...l,...a,ref:c,onOpenAutoFocus:P(a.onOpenAutoFocus,m=>{m.preventDefault(),u.current?.focus({preventScroll:!0})}),onPointerDownOutside:m=>m.preventDefault(),onInteractOutside:m=>m.preventDefault(),children:[t.jsx(Ba,{children:s}),t.jsx(Ka,{contentRef:i})]})})})});Fn.displayName=Te;var Ln="AlertDialogTitle",$n=o.forwardRef((e,r)=>{const{__scopeAlertDialog:n,...s}=e,a=fe(n);return t.jsx(nr,{...a,...s,ref:r})});$n.displayName=Ln;var Vn="AlertDialogDescription",Bn=o.forwardRef((e,r)=>{const{__scopeAlertDialog:n,...s}=e,a=fe(n);return t.jsx(sr,{...a,...s,ref:r})});Bn.displayName=Vn;var Wa="AlertDialogAction",Wn=o.forwardRef((e,r)=>{const{__scopeAlertDialog:n,...s}=e,a=fe(n);return t.jsx(or,{...a,...s,ref:r})});Wn.displayName=Wa;var Kn="AlertDialogCancel",Hn=o.forwardRef((e,r)=>{const{__scopeAlertDialog:n,...s}=e,{cancelRef:a}=Va(Kn,n),l=fe(n),i=z(r,a);return t.jsx(or,{...l,...s,ref:i})});Hn.displayName=Kn;var Ka=({contentRef:e})=>{const r=`\`${Te}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Te}\` by passing a \`${Vn}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Te}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return o.useEffect(()=>{document.getElementById(e.current?.getAttribute("aria-describedby"))||console.warn(r)},[r,e]),null},Ha=Pn,Ua=kn,qa=Mn,Un=On,qn=Fn,Gn=Wn,zn=Hn,Qn=$n,Yn=Bn;const He=Ha,Ue=Ua,Ga=qa,Xn=o.forwardRef(({className:e,...r},n)=>t.jsx(Un,{className:V("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...r,ref:n}));Xn.displayName=Un.displayName;const Ae=o.forwardRef(({className:e,...r},n)=>t.jsxs(Ga,{children:[t.jsx(Xn,{}),t.jsx(qn,{ref:n,className:V("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r})]}));Ae.displayName=qn.displayName;const Pe=({className:e,...r})=>t.jsx("div",{className:V("flex flex-col space-y-2 text-center sm:text-left",e),...r});Pe.displayName="AlertDialogHeader";const ke=({className:e,...r})=>t.jsx("div",{className:V("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...r});ke.displayName="AlertDialogFooter";const Me=o.forwardRef(({className:e,...r},n)=>t.jsx(Qn,{ref:n,className:V("text-lg font-semibold",e),...r}));Me.displayName=Qn.displayName;const Oe=o.forwardRef(({className:e,...r},n)=>t.jsx(Yn,{ref:n,className:V("text-sm text-muted-foreground",e),...r}));Oe.displayName=Yn.displayName;const Fe=o.forwardRef(({className:e,...r},n)=>t.jsx(Gn,{ref:n,className:V(Cr(),e),...r}));Fe.displayName=Gn.displayName;const Le=o.forwardRef(({className:e,...r},n)=>t.jsx(zn,{ref:n,className:V(Cr({variant:"outline"}),"mt-2 sm:mt-0",e),...r}));Le.displayName=zn.displayName;const za=()=>{const[e,r]=o.useState(null),[n,s]=o.useState({code:"",name:"",nationalId:""}),[a,l]=o.useState(!1),[i,c]=o.useState(""),[u,m]=o.useState(1),v=10,{toast:f}=lt(),b=it(),{data:C,isLoading:w}=Ee({queryKey:["students",u,i],queryFn:async()=>{let y=L.from("students").select("*",{count:"exact"}).order("student_code").range((u-1)*v,u*v-1);i&&(y=y.or(`student_code.ilike.%${i}%,student_name.ilike.%${i}%`));const{data:E,error:g,count:p}=await y;if(g)throw g;return{students:E,count:p}},placeholderData:jr}),d=C?.students||[],h=C?.count||0,x=Math.ceil(h/v),N=async()=>{const y=re();if(!y){f({title:"خطأ",description:"جلسة العمل انتهت، يرجى تسجيل الدخول مرة أخرى",variant:"destructive"});return}const E=Ze(n.code),g=Ze(n.name),p=Ze(n.nationalId);if(!E||!g||!p){f({title:"خطأ",description:"الرجاء ملء جميع الحقول",variant:"destructive"});return}if(!Ys(E)){f({title:"خطأ",description:" الكود الاكاديمي غير صحيح (استخدم أحرف وأرقام و- أو _)",variant:"destructive"});return}if(p.length!==14){f({title:"خطأ",description:"الرقم القومي يجب أن يتكون من 14 رقم",variant:"destructive"});return}try{const{error:S}=await L.from("students").insert([{student_code:E,student_name:g,national_id:p}]);if(S)throw S;await oe(y.adminCode,"students","insert",{student_code:E,student_name:g,national_id:p}),f({title:"نجح",description:"تم إضافة الطالب بنجاح"}),s({code:"",name:"",nationalId:""}),l(!1),b.invalidateQueries({queryKey:["students"]})}catch(S){const D=S;console.error("Error adding student:",S);let k="حدث خطأ أثناء إضافة الطالب";D.code==="23505"?k="بيانات مكررة: الكود الاكاديمي أو الرقم القومي موجود بالفعل لطالب آخر":D.code==="42703"?k="خطأ في النظام: قاعدة البيانات تحتاج إلى تحديث (عمود الرقم القومي غير موجود)":D.message&&(k=D.message),f({title:"خطأ",description:k,variant:"destructive"})}},j=async()=>{if(!e)return;const y=re();if(!y){f({title:"خطأ",description:"جلسة العمل انتهت، يرجى تسجيل الدخول مرة أخرى",variant:"destructive"});return}if(!e.student_code||!e.student_name||!e.national_id){f({title:"خطأ",description:"الرجاء ملء جميع الحقول",variant:"destructive"});return}if(e.national_id.length!==14){f({title:"خطأ",description:"الرقم القومي يجب أن يتكون من 14 رقم",variant:"destructive"});return}try{const{error:E}=await L.from("students").update({student_code:e.student_code,student_name:e.student_name,national_id:e.national_id}).eq("id",e.id);if(E)throw E;await oe(y.adminCode,"students","update",{id:e.id,student_code:e.student_code,student_name:e.student_name,national_id:e.national_id}),f({title:"نجح",description:"تم تحديث الطالب بنجاح"}),r(null),l(!1),b.invalidateQueries({queryKey:["students"]})}catch(E){const g=E;console.error("Error updating student:",E);let p="فشل تحديث الطالب";g.code==="23505"?p="بيانات مكررة: الكود الاكاديمي أو الرقم القومي موجود بالفعل لطالب آخر":g.code==="42703"?p="خطأ في النظام: قاعدة البيانات تحتاج إلى تحديث (عمود الرقم القومي غير موجود)":g.message&&(p=g.message),f({title:"خطأ",description:p,variant:"destructive"})}},I=async y=>{const E=re();if(!E){f({title:"خطأ",description:"جلسة العمل انتهت، يرجى تسجيل الدخول مرة أخرى",variant:"destructive"});return}try{const{error:g}=await L.from("grades").delete().eq("student_id",y);if(g)throw g;const{error:p}=await L.from("students").delete().eq("id",y);if(p)throw p;await oe(E.adminCode,"students","delete",{id:y}),f({title:"نجح",description:"تم حذف الطالب وجميع درجاته بنجاح"}),b.invalidateQueries({queryKey:["students"]}),b.invalidateQueries({queryKey:["grades"]})}catch(g){console.error("Delete error:",g),f({title:"خطأ",description:"فشل حذف الطالب",variant:"destructive"})}};return w?t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx(Ie,{className:"h-8 w-48"}),t.jsx(Ie,{className:"h-10 w-32"})]}),t.jsx(De,{className:"bg-card/95 backdrop-blur-sm border-border",children:t.jsx("div",{className:"space-y-2 p-4",children:Array.from({length:5}).map((y,E)=>t.jsx(Ie,{className:"h-12 w-full"},E))})})]}):t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"إدارة الطلاب"}),t.jsxs(ar,{open:a,onOpenChange:l,children:[t.jsx(ir,{asChild:!0,children:t.jsxs($,{onClick:()=>{r(null),s({code:"",name:"",nationalId:""})},className:"gap-2 bg-primary hover:bg-primary/90",children:[t.jsx(qt,{className:"w-4 h-4"}),"إضافة طالب"]})}),t.jsxs(mt,{className:"bg-card border-border",children:[t.jsx(pt,{children:t.jsx(ht,{className:"text-foreground text-right mt-4",children:e?"تعديل طالب":"إضافة طالب جديد"})}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{children:t.jsx(he,{placeholder:" الكود الاكاديمي",value:e?e.student_code:n.code,maxLength:6,onChange:y=>{const E=y.target.value;/^\d*$/.test(E)&&(e?r({...e,student_code:E}):s({...n,code:E}))},className:"text-right bg-secondary/50 border-border",dir:"ltr"})}),t.jsx("div",{children:t.jsx(he,{placeholder:"اسم الطالب",value:e?e.student_name:n.name,minLength:3,maxLength:50,onChange:y=>{const E=y.target.value;/^[a-zA-Z\u0600-\u06FF\s]*$/.test(E)&&(e?r({...e,student_name:E}):s({...n,name:E}))},className:"text-right bg-secondary/50 border-border"})}),t.jsx("div",{children:t.jsx(he,{placeholder:"الرقم القومي",value:e?e.national_id||"":n.nationalId,maxLength:14,onChange:y=>{const E=y.target.value;/^\d*$/.test(E)&&(e?r({...e,national_id:E}):s({...n,nationalId:E}))},className:"text-right bg-secondary/50 border-border",dir:"ltr",type:"text",inputMode:"numeric",pattern:"[0-9]*"})}),t.jsx($,{onClick:e?j:N,className:"w-full bg-primary hover:bg-primary/90",children:e?"تحديث":"إضافة"})]})]})]})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(he,{placeholder:"ابحث برقم الطالب أو الاسم...",value:i,maxLength:50,onChange:y=>c(y.target.value),className:"flex-1 bg-secondary/50 border-border"}),i&&t.jsx($,{variant:"outline",onClick:()=>c(""),className:"border-border",children:"مسح"})]}),t.jsx(De,{className:"bg-card/95 backdrop-blur-sm border-border",children:t.jsxs(Vt,{children:[t.jsx(Bt,{children:t.jsxs(ge,{className:"border-border",children:[t.jsx(de,{className:"text-right text-foreground",children:" الكود الاكاديمي"}),t.jsx(de,{className:"text-right text-foreground",children:"اسم الطالب"}),t.jsx(de,{className:"text-right text-foreground",children:"الرقم القومي"}),t.jsx(de,{className:"text-right text-foreground",children:"الإجراءات"})]})}),t.jsx(Wt,{children:d.length>0?d.map(y=>t.jsxs(ge,{className:"border-border",children:[t.jsx(se,{className:"text-foreground font-mono",children:y.student_code}),t.jsx(se,{className:"text-foreground",children:y.student_name}),t.jsx(se,{className:"text-foreground font-mono",children:y.national_id||"-"}),t.jsx(se,{children:t.jsxs("div",{className:"flex gap-2",children:[t.jsxs($,{size:"sm",variant:"outline",onClick:()=>{r(y),l(!0)},className:"gap-1 border-border",children:[t.jsx(Ut,{className:"w-3 h-3"}),"تعديل"]}),t.jsxs(He,{children:[t.jsx(Ue,{asChild:!0,children:t.jsxs($,{size:"sm",variant:"outline",className:"gap-1 border-destructive text-destructive hover:bg-destructive/10",children:[t.jsx(Gt,{className:"w-3 h-3"}),"حذف"]})}),t.jsxs(Ae,{children:[t.jsxs(Pe,{children:[t.jsx(Me,{className:"text-right",children:"حذف الطالب؟"}),t.jsxs(Oe,{className:"text-right",children:["هل أنت متأكد من حذف الطالب ",t.jsx("span",{className:"font-bold text-foreground",children:y.student_name}),"؟ سيتم حذف جميع درجاته أيضاً."]})]}),t.jsxs(ke,{className:"justify-end gap-2",children:[t.jsx(Le,{className:"ml-0",children:"إلغاء"}),t.jsx(Fe,{onClick:()=>I(y.id),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"حذف"})]})]})]})]})})]},y.id)):t.jsx(ge,{className:"border-border",children:t.jsx(se,{colSpan:4,className:"text-center text-muted-foreground py-8",children:i?"لم يتم العثور على طلاب":"لا يوجد طلاب"})})})]})}),x>1&&t.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-card/95 rounded-lg border border-border",children:[t.jsxs("div",{className:"text-sm text-muted-foreground",children:["الصفحة ",u," من ",x," (",h," نتيجة)"]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx($,{variant:"outline",size:"sm",onClick:()=>m(y=>Math.max(1,y-1)),disabled:u===1,className:"border-border",children:t.jsx(Ht,{className:"w-4 h-4"})}),t.jsx($,{variant:"outline",size:"sm",onClick:()=>m(y=>Math.min(x,y+1)),disabled:u===x,className:"border-border",children:t.jsx(Kt,{className:"w-4 h-4"})})]})]})]})},Qa=()=>{const[e,r]=o.useState(null),[n,s]=o.useState(""),[a,l]=o.useState(!1),{toast:i}=lt(),c=it(),{data:u=[],isLoading:m}=Ee({queryKey:["courses_list"],queryFn:async()=>{const{data:w,error:d}=await L.from("courses").select("*").order("course_name");if(d)throw d;return w}}),v=async()=>{const w=re();if(!w){i({title:"خطأ",description:"جلسة العمل انتهت، يرجى تسجيل الدخول مرة أخرى",variant:"destructive"});return}if(!n.trim()){i({title:"خطأ",description:"الرجاء إدخال اسم المادة",variant:"destructive"});return}if(n.trim().length<=4){i({title:"خطأ",description:"اسم المادة يجب أن يكون أكثر من 4 أحرف",variant:"destructive"});return}const d=n.trim();if(u.find(x=>x.course_name.toLowerCase()===d.toLowerCase())){i({title:"خطأ",description:"اسم المادة موجود بالفعل",variant:"destructive"});return}try{const{error:x}=await L.from("courses").insert([{course_name:d}]);if(x)throw x;await oe(w.adminCode,"courses","insert",{course_name:d}),i({title:"نجح",description:"تم إضافة المادة بنجاح"}),s(""),l(!1),c.invalidateQueries({queryKey:["courses_list"]})}catch{i({title:"خطأ",description:"فشل إضافة المادة",variant:"destructive"})}},f=async()=>{if(!e)return;const w=re();if(!w){i({title:"خطأ",description:"جلسة العمل انتهت، يرجى تسجيل الدخول مرة أخرى",variant:"destructive"});return}const d=e.course_name.trim();if(!d){i({title:"خطأ",description:"الرجاء إدخال اسم المادة",variant:"destructive"});return}if(d.length<=4){i({title:"خطأ",description:"اسم المادة يجب أن يكون أكثر من 4 أحرف",variant:"destructive"});return}if(u.find(x=>x.id!==e.id&&x.course_name.toLowerCase()===d.toLowerCase())){i({title:"خطأ",description:"اسم المادة موجود بالفعل",variant:"destructive"});return}try{const{error:x}=await L.from("courses").update({course_name:d}).eq("id",e.id);if(x)throw x;await oe(w.adminCode,"courses","update",{id:e.id,course_name:d}),i({title:"نجح",description:"تم تحديث المادة بنجاح"}),r(null),l(!1),c.invalidateQueries({queryKey:["courses_list"]}),c.invalidateQueries({queryKey:["grades"]})}catch{i({title:"خطأ",description:"فشل تحديث المادة",variant:"destructive"})}},b=async w=>{const d=re();if(!d){i({title:"خطأ",description:"جلسة العمل انتهت، يرجى تسجيل الدخول مرة أخرى",variant:"destructive"});return}try{const{error:h}=await L.from("courses").delete().eq("id",w);if(h)throw h;await oe(d.adminCode,"courses","delete",{id:w}),i({title:"نجح",description:"تم حذف المادة بنجاح"}),c.invalidateQueries({queryKey:["courses_list"]}),c.invalidateQueries({queryKey:["grades"]})}catch{i({title:"خطأ",description:"فشل حذف المادة",variant:"destructive"})}},C=(w,d)=>{const h=w.replace(/[^a-zA-Z\u0600-\u06FF\s]/g,"").slice(0,40);d&&e?r({...e,course_name:h}):s(h)};return m?t.jsx("div",{className:"text-center p-8 text-foreground",children:"جاري التحميل..."}):t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"إدارة المواد"}),t.jsxs(ar,{open:a,onOpenChange:l,children:[t.jsx(ir,{asChild:!0,children:t.jsxs($,{onClick:()=>{r(null),s("")},className:"gap-2 bg-primary hover:bg-primary/90",children:[t.jsx(qt,{className:"w-4 h-4"}),"إضافة مادة"]})}),t.jsxs(mt,{className:"bg-card border-border",children:[t.jsx(pt,{children:t.jsx(ht,{className:"text-foreground text-right mt-4",children:e?"تعديل مادة":"إضافة مادة جديدة"})}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{children:t.jsx(he,{placeholder:"اسم المادة",minLength:4,maxLength:40,value:e?e.course_name:n,onChange:w=>C(w.target.value,!!e),className:"text-right bg-secondary/50 border-border"})}),t.jsx($,{onClick:e?f:v,className:"w-full bg-primary hover:bg-primary/90",children:e?"تحديث":"إضافة"})]})]})]})]}),t.jsx(De,{className:"bg-card/95 backdrop-blur-sm border-border",children:t.jsxs(Vt,{children:[t.jsx(Bt,{children:t.jsxs(ge,{className:"border-border",children:[t.jsx(de,{className:"text-right text-foreground",children:"اسم المادة"}),t.jsx(de,{className:"text-right text-foreground",children:"الإجراءات"})]})}),t.jsx(Wt,{children:u.map(w=>t.jsxs(ge,{className:"border-border",children:[t.jsx(se,{className:"text-foreground",children:w.course_name}),t.jsx(se,{children:t.jsxs("div",{className:"flex gap-2",children:[t.jsxs($,{size:"sm",variant:"outline",onClick:()=>{r(w),l(!0)},className:"gap-1 border-border",children:[t.jsx(Ut,{className:"w-3 h-3"}),"تعديل"]}),t.jsxs(He,{children:[t.jsx(Ue,{asChild:!0,children:t.jsxs($,{size:"sm",variant:"outline",className:"gap-1 border-destructive text-destructive hover:bg-destructive/10",children:[t.jsx(Gt,{className:"w-3 h-3"}),"حذف"]})}),t.jsxs(Ae,{children:[t.jsxs(Pe,{children:[t.jsx(Me,{className:"text-right",children:"حذف المادة؟"}),t.jsxs(Oe,{className:"text-right",children:["سيتم حذف المادة ",t.jsxs("span",{className:"font-bold text-destructive",children:['"',w.course_name,'"']})," .هل أنت متأكد؟"]})]}),t.jsxs(ke,{className:"justify-end gap-2",children:[t.jsx(Le,{className:"ml-0",children:"إلغاء"}),t.jsx(Fe,{onClick:()=>b(w.id),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"حذف"})]})]})]})]})})]},w.id))})]})})]})};function wr(e,[r,n]){return Math.min(n,Math.max(r,e))}function Ya(e){const r=Xa(e),n=o.forwardRef((s,a)=>{const{children:l,...i}=s,c=o.Children.toArray(l),u=c.find(Ja);if(u){const m=u.props.children,v=c.map(f=>f===u?o.Children.count(m)>1?o.Children.only(null):o.isValidElement(m)?m.props.children:null:f);return t.jsx(r,{...i,ref:a,children:o.isValidElement(m)?o.cloneElement(m,void 0,v):null})}return t.jsx(r,{...i,ref:a,children:l})});return n.displayName=`${e}.Slot`,n}function Xa(e){const r=o.forwardRef((n,s)=>{const{children:a,...l}=n;if(o.isValidElement(a)){const i=ti(a),c=ei(l,a.props);return a.type!==o.Fragment&&(c.ref=s?Er(s,i):i),o.cloneElement(a,c)}return o.Children.count(a)>1?o.Children.only(null):null});return r.displayName=`${e}.SlotClone`,r}var Za=Symbol("radix.slottable");function Ja(e){return o.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Za}function ei(e,r){const n={...r};for(const s in r){const a=e[s],l=r[s];/^on[A-Z]/.test(s)?a&&l?n[s]=(...c)=>{const u=l(...c);return a(...c),u}:a&&(n[s]=a):s==="style"?n[s]={...a,...l}:s==="className"&&(n[s]=[a,l].filter(Boolean).join(" "))}return{...e,...n}}function ti(e){let r=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=r&&"isReactWarning"in r&&r.isReactWarning;return n?e.ref:(r=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=r&&"isReactWarning"in r&&r.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function ri(e){const r=o.useRef({value:e,previous:e});return o.useMemo(()=>(r.current.value!==e&&(r.current.previous=r.current.value,r.current.value=e),r.current.previous),[e])}var ni=[" ","Enter","ArrowUp","ArrowDown"],si=[" ","Enter"],we="Select",[gt,vt,oi]=_r(we),[$e]=qe(we,[oi,Dr]),xt=Dr(),[ai,xe]=$e(we),[ii,ci]=$e(we),Zn=e=>{const{__scopeSelect:r,children:n,open:s,defaultOpen:a,onOpenChange:l,value:i,defaultValue:c,onValueChange:u,dir:m,name:v,autoComplete:f,disabled:b,required:C,form:w}=e,d=xt(r),[h,x]=o.useState(null),[N,j]=o.useState(null),[I,y]=o.useState(!1),E=zt(m),[g,p]=Ke({prop:s,defaultProp:a??!1,onChange:l,caller:we}),[S,D]=Ke({prop:i,defaultProp:c,onChange:u,caller:we}),k=o.useRef(null),U=h?w||!!h.closest("form"):!0,[Z,J]=o.useState(new Set),q=Array.from(Z).map(A=>A.props.value).join(";");return t.jsx(Ws,{...d,children:t.jsxs(ai,{required:C,scope:r,trigger:h,onTriggerChange:x,valueNode:N,onValueNodeChange:j,valueNodeHasChildren:I,onValueNodeHasChildrenChange:y,contentId:ve(),value:S,onValueChange:D,open:g,onOpenChange:p,dir:E,triggerPointerDownPosRef:k,disabled:b,children:[t.jsx(gt.Provider,{scope:r,children:t.jsx(ii,{scope:e.__scopeSelect,onNativeOptionAdd:o.useCallback(A=>{J(W=>new Set(W).add(A))},[]),onNativeOptionRemove:o.useCallback(A=>{J(W=>{const Y=new Set(W);return Y.delete(A),Y})},[]),children:n})}),U?t.jsxs(ws,{"aria-hidden":!0,required:C,tabIndex:-1,name:v,autoComplete:f,value:S,onChange:A=>D(A.target.value),disabled:b,form:w,children:[S===void 0?t.jsx("option",{value:""}):null,Array.from(Z)]},q):null]})})};Zn.displayName=we;var Jn="SelectTrigger",es=o.forwardRef((e,r)=>{const{__scopeSelect:n,disabled:s=!1,...a}=e,l=xt(n),i=xe(Jn,n),c=i.disabled||s,u=z(r,i.onTriggerChange),m=vt(n),v=o.useRef("touch"),[f,b,C]=Ss(d=>{const h=m().filter(j=>!j.disabled),x=h.find(j=>j.value===i.value),N=Cs(h,d,x);N!==void 0&&i.onValueChange(N.value)}),w=d=>{c||(i.onOpenChange(!0),C()),d&&(i.triggerPointerDownPosRef.current={x:Math.round(d.pageX),y:Math.round(d.pageY)})};return t.jsx(Hs,{asChild:!0,...l,children:t.jsx(B.button,{type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:c,"data-disabled":c?"":void 0,"data-placeholder":js(i.value)?"":void 0,...a,ref:u,onClick:P(a.onClick,d=>{d.currentTarget.focus(),v.current!=="mouse"&&w(d)}),onPointerDown:P(a.onPointerDown,d=>{v.current=d.pointerType;const h=d.target;h.hasPointerCapture(d.pointerId)&&h.releasePointerCapture(d.pointerId),d.button===0&&d.ctrlKey===!1&&d.pointerType==="mouse"&&(w(d),d.preventDefault())}),onKeyDown:P(a.onKeyDown,d=>{const h=f.current!=="";!(d.ctrlKey||d.altKey||d.metaKey)&&d.key.length===1&&b(d.key),!(h&&d.key===" ")&&ni.includes(d.key)&&(w(),d.preventDefault())})})})});es.displayName=Jn;var ts="SelectValue",rs=o.forwardRef((e,r)=>{const{__scopeSelect:n,className:s,style:a,children:l,placeholder:i="",...c}=e,u=xe(ts,n),{onValueNodeHasChildrenChange:m}=u,v=l!==void 0,f=z(r,u.onValueNodeChange);return ue(()=>{m(v)},[m,v]),t.jsx(B.span,{...c,ref:f,style:{pointerEvents:"none"},children:js(u.value)?t.jsx(t.Fragment,{children:i}):l})});rs.displayName=ts;var li="SelectIcon",ns=o.forwardRef((e,r)=>{const{__scopeSelect:n,children:s,...a}=e;return t.jsx(B.span,{"aria-hidden":!0,...a,ref:r,children:s||"▼"})});ns.displayName=li;var di="SelectPortal",ss=e=>t.jsx(Ir,{asChild:!0,...e});ss.displayName=di;var je="SelectContent",os=o.forwardRef((e,r)=>{const n=xe(je,e.__scopeSelect),[s,a]=o.useState();if(ue(()=>{a(new DocumentFragment)},[]),!n.open){const l=s;return l?Sr.createPortal(t.jsx(as,{scope:e.__scopeSelect,children:t.jsx(gt.Slot,{scope:e.__scopeSelect,children:t.jsx("div",{children:e.children})})}),l):null}return t.jsx(is,{...e,ref:r})});os.displayName=je;var ae=10,[as,be]=$e(je),ui="SelectContentImpl",fi=Ya("SelectContent.RemoveScroll"),is=o.forwardRef((e,r)=>{const{__scopeSelect:n,position:s="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:l,onPointerDownOutside:i,side:c,sideOffset:u,align:m,alignOffset:v,arrowPadding:f,collisionBoundary:b,collisionPadding:C,sticky:w,hideWhenDetached:d,avoidCollisions:h,...x}=e,N=xe(je,n),[j,I]=o.useState(null),[y,E]=o.useState(null),g=z(r,_=>I(_)),[p,S]=o.useState(null),[D,k]=o.useState(null),U=vt(n),[Z,J]=o.useState(!1),q=o.useRef(!1);o.useEffect(()=>{if(j)return dn(j)},[j]),tn();const A=o.useCallback(_=>{const[T,...F]=U().map(K=>K.ref.current),[O]=F.slice(-1),M=document.activeElement;for(const K of _)if(K===M||(K?.scrollIntoView({block:"nearest"}),K===T&&y&&(y.scrollTop=0),K===O&&y&&(y.scrollTop=y.scrollHeight),K?.focus(),document.activeElement!==M))return},[U,y]),W=o.useCallback(()=>A([p,j]),[A,p,j]);o.useEffect(()=>{Z&&W()},[Z,W]);const{onOpenChange:Y,triggerPointerDownPosRef:Q}=N;o.useEffect(()=>{if(j){let _={x:0,y:0};const T=O=>{_={x:Math.abs(Math.round(O.pageX)-(Q.current?.x??0)),y:Math.abs(Math.round(O.pageY)-(Q.current?.y??0))}},F=O=>{_.x<=10&&_.y<=10?O.preventDefault():j.contains(O.target)||Y(!1),document.removeEventListener("pointermove",T),Q.current=null};return Q.current!==null&&(document.addEventListener("pointermove",T),document.addEventListener("pointerup",F,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",T),document.removeEventListener("pointerup",F,{capture:!0})}}},[j,Y,Q]),o.useEffect(()=>{const _=()=>Y(!1);return window.addEventListener("blur",_),window.addEventListener("resize",_),()=>{window.removeEventListener("blur",_),window.removeEventListener("resize",_)}},[Y]);const[te,ye]=Ss(_=>{const T=U().filter(M=>!M.disabled),F=T.find(M=>M.ref.current===document.activeElement),O=Cs(T,_,F);O&&setTimeout(()=>O.ref.current.focus())}),ee=o.useCallback((_,T,F)=>{const O=!q.current&&!F;(N.value!==void 0&&N.value===T||O)&&(S(_),O&&(q.current=!0))},[N.value]),H=o.useCallback(()=>j?.focus(),[j]),G=o.useCallback((_,T,F)=>{const O=!q.current&&!F;(N.value!==void 0&&N.value===T||O)&&k(_)},[N.value]),X=s==="popper"?At:cs,R=X===At?{side:c,sideOffset:u,align:m,alignOffset:v,arrowPadding:f,collisionBoundary:b,collisionPadding:C,sticky:w,hideWhenDetached:d,avoidCollisions:h}:{};return t.jsx(as,{scope:n,content:j,viewport:y,onViewportChange:E,itemRefCallback:ee,selectedItem:p,onItemLeave:H,itemTextRefCallback:G,focusSelectedItem:W,selectedItemText:D,position:s,isPositioned:Z,searchRef:te,children:t.jsx(Xt,{as:fi,allowPinchZoom:!0,children:t.jsx(Yt,{asChild:!0,trapped:N.open,onMountAutoFocus:_=>{_.preventDefault()},onUnmountAutoFocus:P(a,_=>{N.trigger?.focus({preventScroll:!0}),_.preventDefault()}),children:t.jsx(Rr,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:l,onPointerDownOutside:i,onFocusOutside:_=>_.preventDefault(),onDismiss:()=>N.onOpenChange(!1),children:t.jsx(X,{role:"listbox",id:N.contentId,"data-state":N.open?"open":"closed",dir:N.dir,onContextMenu:_=>_.preventDefault(),...x,...R,onPlaced:()=>J(!0),ref:g,style:{display:"flex",flexDirection:"column",outline:"none",...x.style},onKeyDown:P(x.onKeyDown,_=>{const T=_.ctrlKey||_.altKey||_.metaKey;if(_.key==="Tab"&&_.preventDefault(),!T&&_.key.length===1&&ye(_.key),["ArrowUp","ArrowDown","Home","End"].includes(_.key)){let O=U().filter(M=>!M.disabled).map(M=>M.ref.current);if(["ArrowUp","End"].includes(_.key)&&(O=O.slice().reverse()),["ArrowUp","ArrowDown"].includes(_.key)){const M=_.target,K=O.indexOf(M);O=O.slice(K+1)}setTimeout(()=>A(O)),_.preventDefault()}})})})})})})});is.displayName=ui;var mi="SelectItemAlignedPosition",cs=o.forwardRef((e,r)=>{const{__scopeSelect:n,onPlaced:s,...a}=e,l=xe(je,n),i=be(je,n),[c,u]=o.useState(null),[m,v]=o.useState(null),f=z(r,g=>v(g)),b=vt(n),C=o.useRef(!1),w=o.useRef(!0),{viewport:d,selectedItem:h,selectedItemText:x,focusSelectedItem:N}=i,j=o.useCallback(()=>{if(l.trigger&&l.valueNode&&c&&m&&d&&h&&x){const g=l.trigger.getBoundingClientRect(),p=m.getBoundingClientRect(),S=l.valueNode.getBoundingClientRect(),D=x.getBoundingClientRect();if(l.dir!=="rtl"){const M=D.left-p.left,K=S.left-M,le=g.left-K,ne=g.width+le,bt=Math.max(ne,p.width),yt=window.innerWidth-ae,Nt=wr(K,[ae,Math.max(ae,yt-bt)]);c.style.minWidth=ne+"px",c.style.left=Nt+"px"}else{const M=p.right-D.right,K=window.innerWidth-S.right-M,le=window.innerWidth-g.right-K,ne=g.width+le,bt=Math.max(ne,p.width),yt=window.innerWidth-ae,Nt=wr(K,[ae,Math.max(ae,yt-bt)]);c.style.minWidth=ne+"px",c.style.right=Nt+"px"}const k=b(),U=window.innerHeight-ae*2,Z=d.scrollHeight,J=window.getComputedStyle(m),q=parseInt(J.borderTopWidth,10),A=parseInt(J.paddingTop,10),W=parseInt(J.borderBottomWidth,10),Y=parseInt(J.paddingBottom,10),Q=q+A+Z+Y+W,te=Math.min(h.offsetHeight*5,Q),ye=window.getComputedStyle(d),ee=parseInt(ye.paddingTop,10),H=parseInt(ye.paddingBottom,10),G=g.top+g.height/2-ae,X=U-G,R=h.offsetHeight/2,_=h.offsetTop+R,T=q+A+_,F=Q-T;if(T<=G){const M=k.length>0&&h===k[k.length-1].ref.current;c.style.bottom="0px";const K=m.clientHeight-d.offsetTop-d.offsetHeight,le=Math.max(X,R+(M?H:0)+K+W),ne=T+le;c.style.height=ne+"px"}else{const M=k.length>0&&h===k[0].ref.current;c.style.top="0px";const le=Math.max(G,q+d.offsetTop+(M?ee:0)+R)+F;c.style.height=le+"px",d.scrollTop=T-G+d.offsetTop}c.style.margin=`${ae}px 0`,c.style.minHeight=te+"px",c.style.maxHeight=U+"px",s?.(),requestAnimationFrame(()=>C.current=!0)}},[b,l.trigger,l.valueNode,c,m,d,h,x,l.dir,s]);ue(()=>j(),[j]);const[I,y]=o.useState();ue(()=>{m&&y(window.getComputedStyle(m).zIndex)},[m]);const E=o.useCallback(g=>{g&&w.current===!0&&(j(),N?.(),w.current=!1)},[j,N]);return t.jsx(hi,{scope:n,contentWrapper:c,shouldExpandOnScrollRef:C,onScrollButtonChange:E,children:t.jsx("div",{ref:u,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:I},children:t.jsx(B.div,{...a,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});cs.displayName=mi;var pi="SelectPopperPosition",At=o.forwardRef((e,r)=>{const{__scopeSelect:n,align:s="start",collisionPadding:a=ae,...l}=e,i=xt(n);return t.jsx(Us,{...i,...l,ref:r,align:s,collisionPadding:a,style:{boxSizing:"border-box",...l.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});At.displayName=pi;var[hi,cr]=$e(je,{}),Pt="SelectViewport",ls=o.forwardRef((e,r)=>{const{__scopeSelect:n,nonce:s,...a}=e,l=be(Pt,n),i=cr(Pt,n),c=z(r,l.onViewportChange),u=o.useRef(0);return t.jsxs(t.Fragment,{children:[t.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),t.jsx(gt.Slot,{scope:n,children:t.jsx(B.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:c,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:P(a.onScroll,m=>{const v=m.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:b}=i;if(b?.current&&f){const C=Math.abs(u.current-v.scrollTop);if(C>0){const w=window.innerHeight-ae*2,d=parseFloat(f.style.minHeight),h=parseFloat(f.style.height),x=Math.max(d,h);if(x<w){const N=x+C,j=Math.min(w,N),I=N-j;f.style.height=j+"px",f.style.bottom==="0px"&&(v.scrollTop=I>0?I:0,f.style.justifyContent="flex-end")}}}u.current=v.scrollTop})})})]})});ls.displayName=Pt;var ds="SelectGroup",[gi,vi]=$e(ds),xi=o.forwardRef((e,r)=>{const{__scopeSelect:n,...s}=e,a=ve();return t.jsx(gi,{scope:n,id:a,children:t.jsx(B.div,{role:"group","aria-labelledby":a,...s,ref:r})})});xi.displayName=ds;var us="SelectLabel",fs=o.forwardRef((e,r)=>{const{__scopeSelect:n,...s}=e,a=vi(us,n);return t.jsx(B.div,{id:a.id,...s,ref:r})});fs.displayName=us;var nt="SelectItem",[bi,ms]=$e(nt),ps=o.forwardRef((e,r)=>{const{__scopeSelect:n,value:s,disabled:a=!1,textValue:l,...i}=e,c=xe(nt,n),u=be(nt,n),m=c.value===s,[v,f]=o.useState(l??""),[b,C]=o.useState(!1),w=z(r,N=>u.itemRefCallback?.(N,s,a)),d=ve(),h=o.useRef("touch"),x=()=>{a||(c.onValueChange(s),c.onOpenChange(!1))};if(s==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return t.jsx(bi,{scope:n,value:s,disabled:a,textId:d,isSelected:m,onItemTextChange:o.useCallback(N=>{f(j=>j||(N?.textContent??"").trim())},[]),children:t.jsx(gt.ItemSlot,{scope:n,value:s,disabled:a,textValue:v,children:t.jsx(B.div,{role:"option","aria-labelledby":d,"data-highlighted":b?"":void 0,"aria-selected":m&&b,"data-state":m?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...i,ref:w,onFocus:P(i.onFocus,()=>C(!0)),onBlur:P(i.onBlur,()=>C(!1)),onClick:P(i.onClick,()=>{h.current!=="mouse"&&x()}),onPointerUp:P(i.onPointerUp,()=>{h.current==="mouse"&&x()}),onPointerDown:P(i.onPointerDown,N=>{h.current=N.pointerType}),onPointerMove:P(i.onPointerMove,N=>{h.current=N.pointerType,a?u.onItemLeave?.():h.current==="mouse"&&N.currentTarget.focus({preventScroll:!0})}),onPointerLeave:P(i.onPointerLeave,N=>{N.currentTarget===document.activeElement&&u.onItemLeave?.()}),onKeyDown:P(i.onKeyDown,N=>{u.searchRef?.current!==""&&N.key===" "||(si.includes(N.key)&&x(),N.key===" "&&N.preventDefault())})})})})});ps.displayName=nt;var We="SelectItemText",hs=o.forwardRef((e,r)=>{const{__scopeSelect:n,className:s,style:a,...l}=e,i=xe(We,n),c=be(We,n),u=ms(We,n),m=ci(We,n),[v,f]=o.useState(null),b=z(r,x=>f(x),u.onItemTextChange,x=>c.itemTextRefCallback?.(x,u.value,u.disabled)),C=v?.textContent,w=o.useMemo(()=>t.jsx("option",{value:u.value,disabled:u.disabled,children:C},u.value),[u.disabled,u.value,C]),{onNativeOptionAdd:d,onNativeOptionRemove:h}=m;return ue(()=>(d(w),()=>h(w)),[d,h,w]),t.jsxs(t.Fragment,{children:[t.jsx(B.span,{id:u.textId,...l,ref:b}),u.isSelected&&i.valueNode&&!i.valueNodeHasChildren?Sr.createPortal(l.children,i.valueNode):null]})});hs.displayName=We;var gs="SelectItemIndicator",vs=o.forwardRef((e,r)=>{const{__scopeSelect:n,...s}=e;return ms(gs,n).isSelected?t.jsx(B.span,{"aria-hidden":!0,...s,ref:r}):null});vs.displayName=gs;var kt="SelectScrollUpButton",xs=o.forwardRef((e,r)=>{const n=be(kt,e.__scopeSelect),s=cr(kt,e.__scopeSelect),[a,l]=o.useState(!1),i=z(r,s.onScrollButtonChange);return ue(()=>{if(n.viewport&&n.isPositioned){let c=function(){const m=u.scrollTop>0;l(m)};const u=n.viewport;return c(),u.addEventListener("scroll",c),()=>u.removeEventListener("scroll",c)}},[n.viewport,n.isPositioned]),a?t.jsx(ys,{...e,ref:i,onAutoScroll:()=>{const{viewport:c,selectedItem:u}=n;c&&u&&(c.scrollTop=c.scrollTop-u.offsetHeight)}}):null});xs.displayName=kt;var Mt="SelectScrollDownButton",bs=o.forwardRef((e,r)=>{const n=be(Mt,e.__scopeSelect),s=cr(Mt,e.__scopeSelect),[a,l]=o.useState(!1),i=z(r,s.onScrollButtonChange);return ue(()=>{if(n.viewport&&n.isPositioned){let c=function(){const m=u.scrollHeight-u.clientHeight,v=Math.ceil(u.scrollTop)<m;l(v)};const u=n.viewport;return c(),u.addEventListener("scroll",c),()=>u.removeEventListener("scroll",c)}},[n.viewport,n.isPositioned]),a?t.jsx(ys,{...e,ref:i,onAutoScroll:()=>{const{viewport:c,selectedItem:u}=n;c&&u&&(c.scrollTop=c.scrollTop+u.offsetHeight)}}):null});bs.displayName=Mt;var ys=o.forwardRef((e,r)=>{const{__scopeSelect:n,onAutoScroll:s,...a}=e,l=be("SelectScrollButton",n),i=o.useRef(null),c=vt(n),u=o.useCallback(()=>{i.current!==null&&(window.clearInterval(i.current),i.current=null)},[]);return o.useEffect(()=>()=>u(),[u]),ue(()=>{c().find(v=>v.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[c]),t.jsx(B.div,{"aria-hidden":!0,...a,ref:r,style:{flexShrink:0,...a.style},onPointerDown:P(a.onPointerDown,()=>{i.current===null&&(i.current=window.setInterval(s,50))}),onPointerMove:P(a.onPointerMove,()=>{l.onItemLeave?.(),i.current===null&&(i.current=window.setInterval(s,50))}),onPointerLeave:P(a.onPointerLeave,()=>{u()})})}),yi="SelectSeparator",Ns=o.forwardRef((e,r)=>{const{__scopeSelect:n,...s}=e;return t.jsx(B.div,{"aria-hidden":!0,...s,ref:r})});Ns.displayName=yi;var Ot="SelectArrow",Ni=o.forwardRef((e,r)=>{const{__scopeSelect:n,...s}=e,a=xt(n),l=xe(Ot,n),i=be(Ot,n);return l.open&&i.position==="popper"?t.jsx(qs,{...a,...s,ref:r}):null});Ni.displayName=Ot;var wi="SelectBubbleInput",ws=o.forwardRef(({__scopeSelect:e,value:r,...n},s)=>{const a=o.useRef(null),l=z(s,a),i=ri(r);return o.useEffect(()=>{const c=a.current;if(!c)return;const u=window.HTMLSelectElement.prototype,v=Object.getOwnPropertyDescriptor(u,"value").set;if(i!==r&&v){const f=new Event("change",{bubbles:!0});v.call(c,r),c.dispatchEvent(f)}},[i,r]),t.jsx(B.select,{...n,style:{...Ks,...n.style},ref:l,defaultValue:r})});ws.displayName=wi;function js(e){return e===""||e===void 0}function Ss(e){const r=tt(e),n=o.useRef(""),s=o.useRef(0),a=o.useCallback(i=>{const c=n.current+i;r(c),function u(m){n.current=m,window.clearTimeout(s.current),m!==""&&(s.current=window.setTimeout(()=>u(""),1e3))}(c)},[r]),l=o.useCallback(()=>{n.current="",window.clearTimeout(s.current)},[]);return o.useEffect(()=>()=>window.clearTimeout(s.current),[]),[n,a,l]}function Cs(e,r,n){const a=r.length>1&&Array.from(r).every(m=>m===r[0])?r[0]:r,l=n?e.indexOf(n):-1;let i=ji(e,Math.max(l,0));a.length===1&&(i=i.filter(m=>m!==n));const u=i.find(m=>m.textValue.toLowerCase().startsWith(a.toLowerCase()));return u!==n?u:void 0}function ji(e,r){return e.map((n,s)=>e[(r+s)%e.length])}var Si=Zn,_s=es,Ci=rs,_i=ns,Ei=ss,Es=os,Ii=ls,Is=fs,Rs=ps,Ri=hs,Ti=vs,Ts=xs,Ds=bs,As=Ns;const Ft=Si,Lt=Ci,st=o.forwardRef(({className:e,children:r,...n},s)=>t.jsxs(_s,{ref:s,className:V("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[r,t.jsx(_i,{asChild:!0,children:t.jsx(Pr,{className:"h-4 w-4 opacity-50"})})]}));st.displayName=_s.displayName;const Ps=o.forwardRef(({className:e,...r},n)=>t.jsx(Ts,{ref:n,className:V("flex cursor-default items-center justify-center py-1",e),...r,children:t.jsx(to,{className:"h-4 w-4"})}));Ps.displayName=Ts.displayName;const ks=o.forwardRef(({className:e,...r},n)=>t.jsx(Ds,{ref:n,className:V("flex cursor-default items-center justify-center py-1",e),...r,children:t.jsx(Pr,{className:"h-4 w-4"})}));ks.displayName=Ds.displayName;const ot=o.forwardRef(({className:e,children:r,position:n="popper",...s},a)=>t.jsx(Ei,{children:t.jsxs(Es,{ref:a,className:V("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...s,children:[t.jsx(Ps,{}),t.jsx(Ii,{className:V("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),t.jsx(ks,{})]})}));ot.displayName=Es.displayName;const Di=o.forwardRef(({className:e,...r},n)=>t.jsx(Is,{ref:n,className:V("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...r}));Di.displayName=Is.displayName;const at=o.forwardRef(({className:e,children:r,...n},s)=>t.jsxs(Rs,{ref:s,className:V("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),...n,children:[t.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:t.jsx(Ti,{children:t.jsx(eo,{className:"h-4 w-4"})})}),t.jsx(Ri,{children:r})]}));at.displayName=Rs.displayName;const Ai=o.forwardRef(({className:e,...r},n)=>t.jsx(As,{ref:n,className:V("-mx-1 my-1 h-px bg-muted",e),...r}));Ai.displayName=As.displayName;const Pi=()=>{const[e,r]=o.useState(null),[n,s]=o.useState({studentId:"",courseId:"",grade:""}),[a,l]=o.useState(!1),[i,c]=o.useState(""),[u,m]=o.useState(1),v=10,{toast:f}=lt(),b=it(),{data:C=[]}=Ee({queryKey:["students_list"],queryFn:async()=>{const{data:g,error:p}=await L.from("students").select("*").order("student_code");if(p)throw p;return g},staleTime:10*60*1e3}),{data:w=[]}=Ee({queryKey:["courses_list"],queryFn:async()=>{const{data:g,error:p}=await L.from("courses").select("*").order("course_name");if(p)throw p;return g},staleTime:10*60*1e3}),{data:d,isLoading:h}=Ee({queryKey:["grades",u,i],queryFn:async()=>{let g=L.from("grades").select(`
          *,
          students!inner (student_name, student_code),
          courses (course_name)
        `,{count:"exact"}).order("created_at",{ascending:!1}).range((u-1)*v,u*v-1);i&&(g=g.ilike("students.student_code",`%${i}%`));const{data:p,error:S,count:D}=await g;if(S)throw S;return{grades:p,count:D}},placeholderData:jr}),x=d?.grades||[],N=d?.count||0,j=Math.ceil(N/v),I=async()=>{const g=re();if(!g){f({title:"خطأ",description:"جلسة العمل انتهت، يرجى تسجيل الدخول مرة أخرى",variant:"destructive"});return}if(!n.studentId||!n.courseId||!n.grade){f({title:"خطأ",description:"الرجاء ملء جميع الحقول",variant:"destructive"});return}const p=parseInt(Ze(n.grade));if(!lr(p)){f({title:"خطأ",description:"الدرجة يجب أن تكون رقماً صحيحاً بين 0 و 30",variant:"destructive"});return}try{const{error:S}=await L.from("grades").insert([{student_id:n.studentId,course_id:n.courseId,grade:p}]);if(S)throw S;await oe(g.adminCode,"grades","insert",{student_id:n.studentId,course_id:n.courseId,grade:p}),f({title:"نجح",description:"تم إضافة الدرجة بنجاح"}),s({studentId:"",courseId:"",grade:""}),l(!1),b.invalidateQueries({queryKey:["grades"]})}catch(S){const U=S.message?.includes("duplicate")?"الدرجة موجودة مسبقاً لهذا الطالب في هذه المادة":"فشل إضافة الدرجة";f({title:"خطأ",description:U,variant:"destructive"})}},y=async()=>{if(!e)return;const g=re();if(!g){f({title:"خطأ",description:"جلسة العمل انتهت، يرجى تسجيل الدخول مرة أخرى",variant:"destructive"});return}const p=e.grade;if(!lr(p)){f({title:"خطأ",description:"الدرجة يجب أن تكون رقماً صحيحاً بين 0 و 30",variant:"destructive"});return}try{const{error:S}=await L.from("grades").update({grade:p}).eq("id",e.id);if(S)throw S;await oe(g.adminCode,"grades","update",{grade_id:e.id,new_grade:p}),f({title:"نجح",description:"تم تحديث الدرجة بنجاح"}),r(null),l(!1),b.invalidateQueries({queryKey:["grades"]})}catch{f({title:"خطأ",description:"فشل تحديث الدرجة",variant:"destructive"})}},E=async g=>{const p=re();if(!p){f({title:"خطأ",description:"جلسة العمل انتهت، يرجى تسجيل الدخول مرة أخرى",variant:"destructive"});return}try{const{error:S}=await L.from("grades").delete().eq("id",g);if(S)throw S;await oe(p.adminCode,"grades","delete",{id:g}),f({title:"نجح",description:"تم حذف الدرجة بنجاح"}),b.invalidateQueries({queryKey:["grades"]})}catch{f({title:"خطأ",description:"فشل حذف الدرجة",variant:"destructive"})}};return h?t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx(Ie,{className:"h-8 w-48"}),t.jsx(Ie,{className:"h-10 w-32"})]}),t.jsx(De,{className:"bg-card/95 backdrop-blur-sm border-border",children:t.jsx("div",{className:"space-y-2 p-4",children:Array.from({length:5}).map((g,p)=>t.jsx(Ie,{className:"h-12 w-full"},p))})})]}):t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"إدارة الدرجات"}),t.jsxs(ar,{open:a,onOpenChange:l,children:[t.jsx(ir,{asChild:!0,children:t.jsxs($,{onClick:()=>{r(null),s({studentId:"",courseId:"",grade:""})},className:"gap-2 bg-primary hover:bg-primary/90",children:[t.jsx(qt,{className:"w-4 h-4"}),"إضافة درجة"]})}),t.jsxs(mt,{className:"bg-card border-border",children:[t.jsx(pt,{children:t.jsx(ht,{className:"text-foreground text-right mt-4",children:e?"تعديل درجة":"إضافة درجة جديدة"})}),t.jsxs("div",{className:"space-y-4",children:[!e&&t.jsxs(t.Fragment,{children:[t.jsxs(Ft,{value:n.studentId,onValueChange:g=>s({...n,studentId:g}),children:[t.jsx(st,{className:"text-right bg-secondary/50 border-border",children:t.jsx(Lt,{placeholder:"اختر الطالب"})}),t.jsx(ot,{className:"bg-card border-border",children:C.map(g=>t.jsxs(at,{value:g.id,children:[g.student_name," (",g.student_code,")"]},g.id))})]}),t.jsxs(Ft,{value:n.courseId,onValueChange:g=>s({...n,courseId:g}),children:[t.jsx(st,{className:"text-right bg-secondary/50 border-border",children:t.jsx(Lt,{placeholder:"اختر المادة"})}),t.jsx(ot,{className:"bg-card border-border",children:w.map(g=>t.jsx(at,{value:g.id,children:g.course_name},g.id))})]})]}),t.jsx(he,{type:"text",inputMode:"numeric",maxLength:2,placeholder:"الدرجة (0-30)",value:e?e.grade:n.grade,onChange:g=>{const p=g.target.value;/^\d*$/.test(p)&&(e?r({...e,grade:p===""?0:parseInt(p)}):s({...n,grade:p}))},className:"text-right bg-secondary/50 border-border"}),t.jsx($,{onClick:e?y:I,className:"w-full bg-primary hover:bg-primary/90",children:e?"تحديث":"إضافة"})]})]})]})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(he,{placeholder:"ابحث برقم الطالب...",value:i,maxLength:6,onChange:g=>{const p=g.target.value;/^\d*$/.test(p)&&c(p)},className:"flex-1 bg-secondary/50 border-border"}),i&&t.jsx($,{variant:"outline",onClick:()=>c(""),className:"border-border",children:"مسح"})]}),t.jsx(De,{className:"bg-card/95 backdrop-blur-sm border-border",children:t.jsxs(Vt,{children:[t.jsx(Bt,{children:t.jsxs(ge,{className:"border-border",children:[t.jsx(de,{className:"text-right text-foreground",children:"الطالب"}),t.jsx(de,{className:"text-right text-foreground",children:"المادة"}),t.jsx(de,{className:"text-right text-foreground",children:"الدرجة"}),t.jsx(de,{className:"text-right text-foreground",children:"الإجراءات"})]})}),t.jsx(Wt,{children:x.length>0?x.map(g=>t.jsxs(ge,{className:`border-border ${g.grade<15?"bg-destructive/10":""}`,children:[t.jsxs(se,{className:"text-foreground",children:[g.students.student_name," (",g.students.student_code,")"]}),t.jsx(se,{className:"text-foreground",children:g.courses.course_name}),t.jsx(se,{className:`font-bold ${g.grade<15?"text-destructive":"text-primary"}`,children:g.grade}),t.jsx(se,{children:t.jsxs("div",{className:"flex gap-2",children:[t.jsxs($,{size:"sm",variant:"outline",onClick:()=>{r(g),l(!0)},className:"gap-1 border-border",children:[t.jsx(Ut,{className:"w-3 h-3"}),"تعديل"]}),t.jsxs(He,{children:[t.jsx(Ue,{asChild:!0,children:t.jsxs($,{size:"sm",variant:"outline",className:"gap-1 border-destructive text-destructive hover:bg-destructive/10",children:[t.jsx(Gt,{className:"w-3 h-3"}),"حذف"]})}),t.jsxs(Ae,{children:[t.jsxs(Pe,{children:[t.jsx(Me,{className:"text-right",children:"حذف الدرجة؟"}),t.jsxs(Oe,{className:"text-right",children:["هل أنت متأكد من حذف درجة الطالب ",t.jsx("span",{className:"font-bold text-foreground",children:g.students.student_name})," في مادة ",t.jsx("span",{className:"font-bold text-foreground",children:g.courses.course_name}),"؟"]})]}),t.jsxs(ke,{className:"justify-end gap-2",children:[t.jsx(Le,{className:"ml-0",children:"إلغاء"}),t.jsx(Fe,{onClick:()=>E(g.id),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"حذف"})]})]})]})]})})]},g.id)):t.jsx(ge,{className:"border-border",children:t.jsx(se,{colSpan:4,className:"text-center t ext-muted-foreground py-8",children:i?"لم يتم العثور على درجات للطالب":"لا توجد درجات"})})})]})}),j>1&&t.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-card/95 rounded-lg border border-border",children:[t.jsxs("div",{className:"text-sm text-muted-foreground",children:["الصفحة ",u," من ",j," (",N," نتيجة)"]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx($,{variant:"outline",size:"sm",onClick:()=>m(g=>Math.max(1,g-1)),disabled:u===1,className:"border-border",children:t.jsx(Ht,{className:"w-4 h-4"})}),t.jsx($,{variant:"outline",size:"sm",onClick:()=>m(g=>Math.min(j,g+1)),disabled:u===j,className:"border-border",children:t.jsx(Kt,{className:"w-4 h-4"})})]})]})]})};var ki=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Mi=ki.reduce((e,r)=>{const n=Vs(`Primitive.${r}`),s=o.forwardRef((a,l)=>{const{asChild:i,...c}=a,u=i?n:r;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),t.jsx(u,{...c,ref:l})});return s.displayName=`Primitive.${r}`,{...e,[r]:s}},{}),Oi="Label",Ms=o.forwardRef((e,r)=>t.jsx(Mi.label,{...e,ref:r,onMouseDown:n=>{n.target.closest("button, input, select, textarea")||(e.onMouseDown?.(n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));Ms.displayName=Oi;var Os=Ms;const Fi=Gs("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),$t=o.forwardRef(({className:e,...r},n)=>t.jsx(Os,{ref:n,className:V(Fi(),e),...r}));$t.displayName=Os.displayName;const Li=()=>{const[e,r]=o.useState(null),[n,s]=o.useState(!1),[a,l]=o.useState([]),[i,c]=o.useState(""),[u,m]=o.useState(1),v=10,f=o.useRef(null),{toast:b}=lt(),C=it(),{data:w=[]}=Ee({queryKey:["courses_list"],queryFn:async()=>{const{data:p,error:S}=await L.from("courses").select("id, course_name").order("course_name");if(S)throw S;return p}});o.useEffect(()=>{w.length>0&&!i&&c(w[0].id)},[w,i]);const d=()=>{r(null),l([]),m(1),f.current&&(f.current.value="")},h=async p=>{const S=p.target.files?.[0];if(S&&(S.type==="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"||S.name.endsWith(".xlsx")||S.name.endsWith(".xls"))){r(S);try{const D=await S.arrayBuffer(),k=dr(D);console.log("Workbook sheets:",k.SheetNames);const U=k.SheetNames[0];console.log("Using sheet:",U);const Z=k.Sheets[U],q=ur.sheet_to_json(Z,{header:1}).slice(1),A=[],W=new Set,Y=new Set;for(let Q=0;Q<q.length;Q++){const te=q[Q],ye=Q+2;let ee=!0,H="",G,X;if(!te[0]||!te[1])ee=!1,H="حقول ناقصة";else{const R=String(te[0]).trim();W.has(R)&&(ee=!1,H="تكرار كود الطالب"),W.add(R);const _=te[2],T=te[3];if(_==null||String(_).trim()===""?(ee=!1,H?H+=" و الرقم القومي مفقود":H="الرقم القومي مفقود"):(G=String(_).trim(),Y.has(G)&&(ee=!1,H?H+=" و تكرار الرقم القومي":H="تكرار الرقم القومي"),Y.add(G)),T==null||String(T).trim()===""){const F=Number(_);!isNaN(F)&&F<=100?(ee=!1,H="الرقم القومي مفقود (التنسيق القديم غير مدعوم)"):(ee=!1,H?H+=" و الدرجة مفقودة":H="الدرجة مفقودة")}else{const F=Number(T);isNaN(F)?(ee=!1,H?H+=" و درجة غير صحيحة":H="درجة غير صحيحة"):X=F}}A.push({student_code:String(te[0]||"").trim(),student_name:String(te[1]||"").trim(),national_id:G,grade:X,isValid:ee,error:H})}l(A),m(1)}catch(D){console.error("Preview error:",D),l([])}}else b({title:"خطأ",description:"الرجاء اختيار ملف Excel صحيح (.xlsx أو .xls)",variant:"destructive"}),r(null),l([])},x=async()=>{if(!e)return;const p=re();if(!p){b({title:"خطأ",description:"جلسة العمل انتهت، يرجى تسجيل الدخول مرة أخرى",variant:"destructive"});return}s(!0);try{if(console.log("Starting file processing..."),!i)throw new Error("يجب اختيار مادة أولاً");const S=w.find(R=>R.id===i);if(!S)throw new Error("المادة المختارة غير متاحة");const D=await e.arrayBuffer();console.log("File loaded, size:",D.byteLength);const k=dr(D);console.log("Workbook sheets:",k.SheetNames);const U=k.SheetNames[0];console.log("Using sheet:",U);const Z=k.Sheets[U],J=ur.sheet_to_json(Z,{header:1});console.log("Raw data:",J);const q=J.slice(1);console.log("Data rows:",q);const A=[],W=[],Y=new Set,Q=new Set;for(let R=0;R<q.length;R++){const _=q[R],T=R+2;if(console.log(`Processing row ${T}:`,_),!_[0]||!_[1]){W.push(`الصف ${T}: العموديات الأولى والثانية مطلوبة (رقم الطالب، اسم الطالب)`);continue}let F,O;const M=_[2],K=_[3];if(M==null||String(M).trim()===""){W.push(`الصف ${T}: الرقم القومي مفقود`);continue}if(F=String(M).trim(),Q.has(F)){W.push(`الصف ${T}: تكرار - الرقم القومي '${F}' موجود بالفعل في الملف`);continue}if(Q.add(F),K==null||String(K).trim()===""){W.push(`الصف ${T}: الدرجة مفقودة`);continue}const le=Number(K);if(isNaN(le)){W.push(`الصف ${T}: الدرجة غير صحيحة`);continue}O=le;const ne=String(_[0]).trim();if(Y.has(ne)){W.push(`الصف ${T}: تكرار - الطالب '${ne}' موجود بالفعل في الملف`);continue}Y.add(ne),A.push({student_code:ne,student_name:String(_[1]).trim(),national_id:F,grade:O})}if(console.log("Processed data:",A),console.log("Invalid rows:",W),W.length>0){const R=W.slice(0,5).join(`
`),_=W.length,T=_>5?`
... و ${_-5} أخطاء أخرى`:"";throw new Error(`وجدت أخطاء في البيانات:
${R}${T}`)}if(A.length===0)throw new Error("لا توجد بيانات صحيحة في الملف");const{data:te}=await L.from("students").select("student_code"),{data:ye}=await L.from("courses").select("course_name"),ee=new Set(te?.map(R=>R.student_code)||[]),H=new Set(ye?.map(R=>R.course_name)||[]),G=A.filter(R=>!ee.has(R.student_code)).map(R=>({student_code:R.student_code,student_name:R.student_name,national_id:R.national_id}));if(console.log("New students to insert:",G),G.length>0){const{error:R}=await L.from("students").insert(G);if(R)throw console.error("Student insert error:",R),R;console.log("Students inserted successfully")}console.log("Courses already managed in CoursesTab - no new courses created"),console.log("Using course:",S.course_name);const X=[];for(const R of A){console.log("Looking up student:",R.student_code);const{data:_,error:T}=await L.from("students").select("id").eq("student_code",R.student_code).single();if(T){console.error("Student lookup error:",T);continue}_&&X.push({student_id:_.id,course_id:S.id,grade:R.grade})}if(console.log("Grade inserts:",X),X.length>0){const{error:R}=await L.from("grades").upsert(X,{onConflict:"student_id,course_id"});if(R)throw console.error("Grade insert error:",R),R;console.log("Grades inserted successfully")}console.log("Summary:"),console.log("- Processed rows:",A.length),console.log("- New students inserted:",G.length),console.log("- Grades inserted/updated:",X.length),await oe(p.adminCode,"bulk_upload","insert",{course_id:S.id,total_rows:A.length,new_students:G.length,grades_inserted:X.length}),b({title:"نجح الرفع",description:`تم رفع ${A.length} سجل (${G.length} طالب جديد, ${X.length} درجة) للمادة: ${S.course_name}`}),C.invalidateQueries({queryKey:["students"]}),C.invalidateQueries({queryKey:["students_list"]}),C.invalidateQueries({queryKey:["grades"]}),r(null),l([]),f.current&&(f.current.value="")}catch(S){console.error("Upload error:",S);const D=S instanceof Error?S.message:"حدث خطأ غير معروف أثناء رفع البيانات";b({title:"خطأ",description:D,variant:"destructive"})}finally{s(!1)}},N=async()=>{const p=re();if(!p){b({title:"خطأ",description:"جلسة العمل انتهت، يرجى تسجيل الدخول مرة أخرى",variant:"destructive"});return}if(!i){b({title:"تنبيه",description:"الرجاء اختيار المادة التي تريد حذف بياناتها",variant:"destructive"});return}try{const{error:S}=await L.from("grades").delete().eq("course_id",i);if(S)throw S;await oe(p.adminCode,"grades","delete_course_grades",{course_id:i}),b({title:"تم الحذف",description:"تم حذف جميع درجات المادة المحددة بنجاح"}),C.invalidateQueries({queryKey:["grades"]})}catch(S){console.error("Delete error:",S);const D=S instanceof Error?S.message:"حدث خطأ غير معروف";b({title:"خطأ",description:D,variant:"destructive"})}},j=async()=>{const p=re();if(!p){b({title:"خطأ",description:"جلسة العمل انتهت، يرجى تسجيل الدخول مرة أخرى",variant:"destructive"});return}try{const{error:S}=await L.from("grades").delete().gt("id","00000000-0000-0000-0000-000000000000");if(S)throw S;const{error:D}=await L.from("students").delete().gt("id","00000000-0000-0000-0000-000000000000");if(D)throw D;const{error:k}=await L.from("courses").delete().gt("id","00000000-0000-0000-0000-000000000000");if(k)throw k;await oe(p.adminCode,"system","delete_all_data",{}),c(""),l([]),r(null),f.current&&(f.current.value=""),C.invalidateQueries({queryKey:["students"]}),C.invalidateQueries({queryKey:["students_list"]}),C.invalidateQueries({queryKey:["courses_list"]}),C.invalidateQueries({queryKey:["grades"]}),b({title:"تم الحذف",description:"تم حذف جميع البيانات بنجاح"})}catch(S){console.error("Delete error:",S);const D=S instanceof Error?S.message:"حدث خطأ غير معروف";b({title:"خطأ",description:D,variant:"destructive"})}},I=Math.ceil(a.length/v),y=(u-1)*v,E=y+v,g=a.slice(y,E);return t.jsx(De,{className:"p-6 bg-card/95 backdrop-blur-sm border-border shadow-[var(--shadow-glow)]",children:t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-foreground mb-2",children:"رفع البيانات بالجملة"}),t.jsx("p",{className:"text-muted-foreground",children:"ارفع ملف Excel يحتوي على بيانات الطلاب والدرجات"})]}),t.jsxs("div",{className:"space-y-4 ",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4 ",children:[t.jsxs("div",{children:[t.jsx($t,{htmlFor:"course-select",children:"اختر المادة"}),t.jsx("div",{className:"mt-2",children:t.jsxs(Ft,{value:i,onValueChange:c,children:[t.jsx(st,{id:"course-select",className:"text-right bg-secondary/40 border-input",dir:"rtl",children:t.jsx(Lt,{placeholder:"-- اختر مادة --"})}),t.jsx(ot,{className:"bg-card border-border ",children:w.map(p=>t.jsx(at,{value:p.id,children:p.course_name},p.id))})]})})]}),t.jsxs("div",{children:[t.jsx($t,{htmlFor:"excel-file",children:"اختر ملف Excel (.xlsx)"}),t.jsx(he,{id:"excel-file",ref:f,type:"file",accept:".xlsx,.xls",onChange:h,className:"mt-2 cursor-pointer text-left",dir:"ltr"})]})]}),e&&t.jsxs("div",{className:"flex flex-row justify-between items-center flex-nowrap gap-4 bg-secondary/30 p-3 rounded-lg border border-border/50",children:[t.jsx("div",{className:" flex font-semibold text-foreground mr-2",children:"الملف المختار:"}),t.jsx("div",{className:"flex text-sm font-bold text-muted-foreground flex-2",children:e.name}),t.jsxs($,{variant:"ghost",size:"sm",onClick:d,className:"flex text-muted-foreground hover:text-destructive hover:bg-destructive/10 h-8 px-2",children:[t.jsx(Tr,{className:"w-4 h-4 ml-1"}),"إزالة الملف"]})]}),a.length>0&&t.jsxs("div",{className:"bg-secondary/50 border border-gray-200 rounded-lg overflow-hidden shadow-sm",children:[t.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 px-4 py-3 border-b border-gray-200 flex justify-between items-center",children:[t.jsxs("h3",{className:"font-semibold text-gray-800 flex items-center gap-2",children:["معاينة البيانات",t.jsxs("span",{className:"text-xs bg-blue-200 text-blue-800 px-2 py-1 rounded-full font-medium",children:[a.length," صف"]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx($,{variant:"outline",size:"icon",className:"h-8 w-8",onClick:()=>m(p=>Math.max(p-1,1)),disabled:u===1,children:t.jsx(Ht,{className:"h-4 w-4"})}),t.jsxs("span",{className:"text-sm text-gray-600",children:["صفحة ",u," من ",I]}),t.jsx($,{variant:"outline",size:"icon",className:"h-8 w-8",onClick:()=>m(p=>Math.min(p+1,I)),disabled:u===I,children:t.jsx(Kt,{className:"h-4 w-4"})})]})]}),t.jsxs("div",{className:"preview-scroll max-h-96 overflow-y-auto bg-white",children:[t.jsxs("div",{className:"sticky top-0 bg-gray-100 grid grid-cols-12 gap-2 px-4 py-3 text-xs font-bold text-gray-700 border-b border-gray-200",children:[t.jsx("div",{className:"col-span-2",children:"رقم الطالب"}),t.jsx("div",{className:"col-span-3",children:"اسم الطالب"}),t.jsx("div",{className:"col-span-3",children:"الرقم القومي"}),t.jsx("div",{className:"col-span-2",children:"الدرجة"}),t.jsx("div",{className:"col-span-2",children:"الخطأ"})]}),g.map((p,S)=>t.jsxs("div",{className:`grid grid-cols-12 gap-2 px-4 py-3 border-b border-gray-100 text-sm transition-colors ${p.isValid?"bg-green-50 hover:bg-green-100":"bg-red-50 hover:bg-red-100"}`,children:[t.jsx("div",{className:"col-span-2 font-mono text-gray-700 truncate",children:p.student_code||"—"}),t.jsx("div",{className:"col-span-3 text-gray-700 truncate",children:p.student_name||"—"}),t.jsx("div",{className:"col-span-3 font-mono text-gray-700 truncate",children:p.national_id||"—"}),t.jsx("div",{className:"col-span-2 font-semibold text-gray-700",children:p.grade??"—"}),t.jsx("div",{className:"col-span-2 flex items-center gap-1",children:p.isValid?t.jsxs("span",{className:"flex items-center gap-1 text-green-700 text-xs font-semibold",children:[t.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"}),"صحيح"]}):t.jsxs("span",{className:"flex items-center gap-1 text-red-700 text-xs font-semibold",children:[t.jsx("span",{className:"w-2 h-2 bg-red-500 rounded-full"}),p.error]})})]},y+S))]})]}),t.jsxs("div",{className:"bg-secondary/50 p-4 rounded-lg",children:[t.jsx("h3",{className:"font-semibold mb-2",children:"تنسيق الملف المطلوب:"}),t.jsxs("p",{className:"text-sm text-muted-foreground",children:["العمود الأول: الكود الاكاديمي",t.jsx("br",{}),"العمود الثاني: اسم الطالب",t.jsx("br",{}),"العمود الثالث: الرقم القومي (",t.jsx("span",{className:"font-semibold text-foreground",children:"مطلوب"}),")",t.jsx("br",{}),"العمود الرابع: الدرجة (رقم، ",t.jsx("span",{className:"font-semibold text-foreground",children:"مطلوب"}),")"]}),t.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["* الصف الأول هو العناوين (سيتم تجاهله)",t.jsx("br",{}),"* جميع الحقول مطلوبة",t.jsx("br",{}),"* لا يمكن أن يكون هناك تكرار لنفس الطالب في الملف",t.jsx("br",{}),'* يجب إضافة المواد أولاً من تبويب "المواد" قبل الرفع']})]}),t.jsx($,{onClick:x,disabled:!e||n,className:"w-full bg-primary hover:bg-primary/90 text-primary-foreground",children:n?"جاري الرفع...":"رفع البيانات"})]}),t.jsxs("div",{className:"border-t border-border pt-6 space-y-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-destructive flex items-center gap-2",children:"⚠️ منطقة الخطر"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"p-4 border border-destructive/20 rounded-lg bg-destructive/5 space-y-3",children:[t.jsx("h4",{className:"font-medium text-foreground",children:"حذف بيانات مادة محددة"}),t.jsxs("p",{className:"text-sm text-muted-foreground",children:["سيتم حذف جميع الدرجات المسجلة للمادة المختارة (",w.find(p=>p.id===i)?.course_name||"لم يتم الاختيار",")."]}),t.jsxs(He,{children:[t.jsx(Ue,{asChild:!0,children:t.jsx($,{variant:"outline",className:"w-full border-destructive/50 text-destructive hover:bg-destructive/10",disabled:!i,children:"حذف بيانات المادة"})}),t.jsxs(Ae,{children:[t.jsxs(Pe,{children:[t.jsx(Me,{className:"text-right",children:"حذف بيانات المادة؟"}),t.jsxs(Oe,{className:"text-right",children:["سيتم حذف جميع الدرجات المرتبطة بمادة ",t.jsxs("span",{className:"font-bold text-destructive",children:['"',w.find(p=>p.id===i)?.course_name,'"']}),". هل أنت متأكد؟"]})]}),t.jsxs(ke,{className:"justify-end gap-2",children:[t.jsx(Le,{className:"ml-0",children:"إلغاء"}),t.jsx(Fe,{onClick:N,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"حذف"})]})]})]})]}),t.jsxs("div",{className:"p-4 border border-destructive/20 rounded-lg bg-destructive/5 space-y-3",children:[t.jsx("h4",{className:"font-medium text-foreground",children:"حذف جميع البيانات"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"سيتم حذف جميع الطلاب والمواد والدرجات من النظام نهائياً."}),t.jsxs(He,{children:[t.jsx(Ue,{asChild:!0,children:t.jsx($,{variant:"destructive",className:"w-full",children:"حذف الكل"})}),t.jsxs(Ae,{children:[t.jsxs(Pe,{children:[t.jsx(Me,{className:"text-right",children:"هل أنت متأكد تماماً؟"}),t.jsx(Oe,{className:"text-right",children:"سيتم حذف جميع الطلاب والمواد والدرجات نهائياً. هذا الإجراء لا يمكن التراجع عنه."})]}),t.jsxs(ke,{className:"justify-end gap-2",children:[t.jsx(Le,{className:"ml-0",children:"إلغاء"}),t.jsx(Fe,{onClick:j,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"حذف الكل"})]})]})]})]})]})]})]})})},Xi=()=>{const[e,r]=o.useState(""),n=Ls(),[s,a]=$s(),l=s.get("tab")||"students";o.useEffect(()=>{const c=re();if(!c){n("/admin/login");return}r(c.adminName)},[n]);const i=()=>{Xs(),n("/")};return t.jsx("div",{className:"min-h-screen p-8",style:{background:"var(--gradient-primary)"},children:t.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between bg-card/95 backdrop-blur-sm border-border shadow-[var(--shadow-glow)] p-6 rounded-lg",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("img",{src:"/logo.png",alt:"Institute Logo",className:"w-16 h-16 object-contain rounded-full shadow-[var(--shadow-glow)]"}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"لوحة الإدارة"}),t.jsx("p",{className:"text-muted-foreground",children:e})]})]}),t.jsxs($,{variant:"outline",onClick:i,className:"gap-2 border-border bg-secondary/50 hover:bg-secondary text-foreground",children:[t.jsx(zs,{className:"w-4 h-4"}),"تسجيل الخروج"]})]}),t.jsxs(jo,{value:l,onValueChange:c=>a({tab:c}),className:"w-full",dir:"rtl",children:[t.jsxs(Jr,{className:"grid w-full grid-cols-4 bg-card/95 backdrop-blur-sm border-border",children:[t.jsxs(Ve,{value:"students",className:"gap-2",children:[t.jsx(no,{className:"w-4 h-4"}),"الطلاب"]}),t.jsxs(Ve,{value:"courses",className:"gap-2",children:[t.jsx(Js,{className:"w-4 h-4"}),"المواد"]}),t.jsxs(Ve,{value:"grades",className:"gap-2",children:[t.jsx(Zs,{className:"w-4 h-4"}),"الدرجات"]}),t.jsxs(Ve,{value:"upload",className:"gap-2",children:[t.jsx(ro,{className:"w-4 h-4"}),"رفع البيانات"]})]}),t.jsx(Be,{value:"students",className:"mt-6 data-[state=inactive]:hidden",forceMount:!0,children:t.jsx(za,{})}),t.jsx(Be,{value:"courses",className:"mt-6 data-[state=inactive]:hidden",forceMount:!0,children:t.jsx(Qa,{})}),t.jsx(Be,{value:"grades",className:"mt-6 data-[state=inactive]:hidden",forceMount:!0,children:t.jsx(Pi,{})}),t.jsx(Be,{value:"upload",className:"mt-6 data-[state=inactive]:hidden",forceMount:!0,children:t.jsx(Li,{})})]})]})})};export{Xi as default};
