import{j as e}from"./query-DZDXimB5.js";import{r as d,u as m}from"./react-ZLBw_slV.js";import{u as g,C as p,l as f,B as x}from"./index-nyx0viYp.js";import{I as h}from"./input-D0Cc-SFm.js";import{s as v}from"./client-CmkErKnx.js";import"./ui-Cv-0l-fj.js";import"./supabase-D8bFuZE2.js";const b=()=>{const[r,i]=d.useState(""),[n,a]=d.useState(!1),l=m(),{toast:s}=g(),c=async o=>{if(o.preventDefault(),!r.trim()){s({title:"خطأ",description:"الرجاء إدخال  الكود الاكاديمي",variant:"destructive"});return}a(!0);try{const{data:t,error:u}=await v.from("students").select("*").eq("student_code",r.trim()).single();if(u||!t){s({title:"خطأ",description:" الكود الاكاديمي غير صحيح",variant:"destructive"}),a(!1);return}sessionStorage.setItem("studentId",t.id),sessionStorage.setItem("studentName",t.student_name),sessionStorage.setItem("studentCode",t.student_code),s({title:"  نتائجك الدراسية",description:`مرحباً ${t.student_name}`}),l("/grades")}catch{s({title:"خطأ",description:"حدث خطأ أثناء تسجيل الدخول",variant:"destructive"})}finally{a(!1)}};return e.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-8",style:{background:"var(--gradient-primary)"},children:e.jsx(p,{className:"w-full max-w-md bg-card/95 backdrop-blur-sm border-border shadow-[var(--shadow-glow)] p-8",children:e.jsxs("div",{className:"flex flex-col items-center gap-6",children:[e.jsx("img",{src:f,alt:"Institute Logo",className:"w-36 h-36 object-contain rounded-full shadow-[var(--shadow-glow)]"}),e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-foreground mb-2",children:"نتيجة درجات - الميد ترم"}),e.jsx("p",{className:"text-muted-foreground",children:"الرجاء إدخال الكود الاكاديمي"})]}),e.jsxs("form",{onSubmit:c,className:"w-full space-y-4",children:[e.jsx("div",{children:e.jsx(h,{type:"text",inputMode:"numeric",pattern:"[0-9]*",maxLength:6,placeholder:" الكود الاكاديمي",value:r,onChange:o=>{const t=o.target.value;/^\d*$/.test(t)&&t.length<=6&&i(t)},className:"text-center bg-secondary/50 border-border text-foreground placeholder:text-muted-foreground  font-bold",dir:"ltr"})}),e.jsx(x,{type:"submit",className:"w-full bg-primary hover:bg-primary/90 text-primary-foreground",disabled:n,children:n?"جاري التحميل...":"الاستعلام عن النتيجة"})]})]})})})},L=()=>e.jsx(b,{});export{L as default};
